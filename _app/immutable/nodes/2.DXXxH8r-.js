import{a as pe,s as Ie}from"../chunks/hii8YTFM.js";import{m as Le,b as je,aa as Be,o as F,ab as D,V as Ke,j as e,ac as O,s as k,a3 as Ne,k as g,v as l,x as r,w as n,n as J,y as w,a9 as P,e as v,g as Ce,f as L,d as ve,ad as Qe,ae as qe}from"../chunks/DDtI3ySZ.js";import{P as De,a as Je}from"../chunks/DADVxvfE.js";import{b as he,i as z}from"../chunks/MADWfPdD.js";import{s as xe,e as be,b as ke,a as we}from"../chunks/Bxanz9Be.js";import{C as Re,d as R,j as ye,I,e as j,t as C,f as M,g as S,k as Ge,i as Ue,l as We,A as Xe,m as Pe,n as Ye,o as Ze,r as ea,h as aa}from"../chunks/D2H9T7Pv.js";import{S as ta,P as ra}from"../chunks/BY6nYbWK.js";import{i as sa,A as la,a as oa}from"../chunks/T_EVkrq1.js";import{F as na}from"../chunks/CvfH1Nsb.js";import{p as ia}from"../chunks/D-OOAyNg.js";async function ua({parent:f}){return{data:await f()}}const Oa=Object.freeze(Object.defineProperty({__proto__:null,load:ua},Symbol.toStringTag,{value:"Module"}));var da=g("<option> </option>"),va=(f,o,y)=>{k(o,!e(o)),e(y)?.scroll({index:0,smoothScroll:!1})},ca=g('<button><span class="hidden whitespace-nowrap md:block"> </span> <!></button>'),_a=g("<option> </option>"),ma=(f,o)=>{e(o)?.toggleFilterElement()},fa=g("<button><span> </span> <!></button>"),ga=(f,o)=>{e(o)?.scroll({index:0,smoothScroll:!1})},pa=(f,o)=>o().showModal(),ha=g("<button><span>Lisää listaan</span> <!></button>"),xa=g('<h2 class="text-xl">Valitse lista</h2> <!>',1),ba=g('<div class="absolute top-0 left-0 flex flex-nowrap items-center gap-0.5 rounded-br bg-gray-100 dark:bg-zinc-700 px-1.5 py-0.5 text-sm text-secondary"><!> <span> </span></div> <!>',1),ka=g("<p>Ei tuloksia</p>"),wa=g('<div class="relative grid h-full grid-cols-[auto_1fr] max-h-full overflow-hidden"><aside class="z-10 flex h-full flex-col max-h-full overflow-hidden border-primary md:w-84 md:border-r"><!></aside> <main class="mx-auto flex h-full w-full flex-col gap-3 bg-secondary p-4 md:gap-4 md:p-6"><div class="flex w-full flex-col items-start gap-4"><div><div class="flex flex-col"><label class="text-sm"></label> <div class="flex flex-row flex-nowrap"><select name="sortingColumn" id="sortingColumn"></select> <!></div></div> <div class="flex flex-col"><label class="text-sm">Korostus</label> <select name="selectedHighlight" id="selectedHighlight"></select></div> <!></div></div> <div class="flex flex-row flex-wrap items-center justify-between gap-2"><p> </p> <button><!> <span> </span></button></div> <div class="flex flex-auto flex-col"><!></div> <!></main></div>');function ya(f,o){je(o,!0);const y=()=>pe(Ge,"$searchQuery",A),B=()=>pe(Ue,"$isMobile",A),[A,T]=Ie();let c=Be(Re.SearchParamsManager),K=F(null),G=F(null),U=F(D(sa(o.kaljakori,ia.url.searchParams))),N=F(D([])),E=F(D(c.getParameter("highlight")||R)),_=F(D(c.getParameter("sort")||R)),p=O(()=>ye[e(_)]||!1),W=O(()=>{let a={...e(U)};Object.keys(a).forEach(s=>{Array.isArray(a[s])&&o.kaljakori.getFilterType(s)!=="number"&&(a[s]=new Set(a[s]))});let t=o.kaljakori.fuzzySearchAndFilter(y(),a);return e(_)&&(t=t.sort((s,i)=>s[e(_)]>i[e(_)]?1:-1)),e(p)||(t=t.reverse()),t});Ke(()=>{const a=c.getParameter("asc")==="true";a!==e(p)&&k(p,a)}),Ne(()=>{c.setParameter("q",y()),e(E)!==R?c.setParameter("highlight",e(E)):c.setParameter("highlight",""),e(_)!==R?c.setParameter("sort",e(_)):c.setParameter("sort",""),e(p)!==!!ye[e(_)]?c.setParameter("asc",String(e(p))):c.setParameter("asc",""),c.update()});var X=wa(),Y=l(X),Se=l(Y);he(na(Se,{get kaljakori(){return o.kaljakori},get activeFilters(){return e(N)},set activeFilters(a){k(N,a,!0)},get filterValues(){return e(U)},set filterValues(a){k(U,a,!0)}}),a=>k(G,a,!0),()=>e(G)),r(Y);var ce=n(Y,2),Z=l(ce),ee=l(Z),ae=l(ee),te=l(ae);xe(te,"for","sortingColumn"),te.textContent="Järjestys";var _e=n(te,2),$=l(_e);be($,21,()=>Ye,we,(a,t)=>{const s=O(()=>o.kaljakori.getFilterValues(e(t)).length>0);var i=ve(),h=L(i);{var m=d=>{var u=da(),V=l(u,!0);r(u);var x={};w(H=>{P(V,H),x!==(x=e(t))&&(u.value=(u.__value=e(t))??"")},[()=>Pe(e(t))]),v(d,u)};z(h,d=>{e(s)&&d(m)})}v(a,i)}),r($);var Ve=n($,2);{var Fe=a=>{var t=ca();t.__click=[va,p,K];var s=l(t),i=l(s,!0);r(s);var h=n(s,2);{let m=O(()=>e(p)?"up_arrow_alt":"down_arrow_alt");I(h,{get name(){return e(m)}})}r(t),w((m,d)=>{S(t,1,m),P(i,d)},[()=>j(C(M.button(),"rounded-none rounded-e border-s-0")),()=>We(e(p),e(_))]),v(a,t)};z(Ve,a=>{e(_)&&a(Fe)})}r(_e),r(ae);var re=n(ae,2),me=l(re);xe(me,"for","selectedHighlight");var Q=n(me,2);be(Q,21,()=>Ze,we,(a,t)=>{const s=O(()=>o.kaljakori.getFilterValues(e(t)).length>0);var i=ve(),h=L(i);{var m=d=>{var u=_a(),V=l(u,!0);r(u);var x={};w(H=>{P(V,H),x!==(x=e(t))&&(u.value=(u.__value=e(t))??"")},[()=>Pe(e(t))]),v(d,u)};z(h,d=>{e(s)&&d(m)})}v(a,i)}),r(Q),r(re);var Me=n(re,2);{var Ae=a=>{var t=fa();t.__click=[ma,G];var s=l(t),i=l(s);r(s);var h=n(s,2);I(h,{name:"filter"}),r(t),w(m=>{S(t,1,m),P(i,`Näytä suodattimet ${e(N).length>0?`(${e(N).length} valittu)`:""}`)},[()=>j(C(M.button(),"col-span-full w-full"))]),v(a,t)};z(Me,a=>{B()&&a(Ae)})}r(ee),r(Z);var se=n(Z,2),le=l(se),Te=l(le);r(le);var q=n(le,2);q.__click=[ga,K];var fe=l(q);I(fe,{name:"arrow_to_top"});var ge=n(fe,2),Ee=l(ge,!0);r(ge),r(q),r(se);var oe=n(se,2),$e=l(oe);he(ta($e,{get items(){return e(W)},itemsClass:"flex flex-col gap-3",renderItem:(t,s=J,i=J)=>{ra(t,{get product(){return s()},get highlight(){return e(E)},get kaljakori(){return o.kaljakori},renderExtras:m=>{var d=ba(),u=L(d),V=l(u);I(V,{name:"hashtag"});var x=n(V,2),H=l(x,!0);r(x),r(u);var ze=n(u,2);De(ze,{class:"gap-4 p-4",renderButton:(ne,ie=J)=>{var b=ha();b.__click=[pa,ie];var ue=n(l(b),2);I(ue,{name:"plus"}),r(b),w(de=>S(b,1,de),[()=>j(C(M.button({type:"positive"}),"ml-auto"))]),v(ne,b)},renderContent:(ne,ie=J)=>{var b=xa(),ue=n(L(b),2);la(ue,{action:de=>{oa(de,s()[Xe.Number]),ie().close()}}),v(ne,b)},$$slots:{renderButton:!0,renderContent:!0}}),w(()=>P(H,`${i()+1}`)),v(m,d)},$$slots:{renderExtras:!0}})},$$slots:{renderItem:!0}}),t=>k(K,t,!0),()=>e(K)),r(oe);var He=n(oe,2);{var Oe=a=>{var t=ka();v(a,t)};z(He,a=>{e(W).length==0&&a(Oe)})}r(ce),r(X),w((a,t,s,i)=>{S(ee,1,a),S($,1,t),S(Q,1,s),P(Te,`Tulosten määrä: ${e(W).length??""}`),S(q,1,i),P(Ee,B()?"Alkuun":"Hyppää alkuun")},[()=>j(C("grid w-full grid-cols-2 items-end gap-2 md:w-fit")),()=>j(C(M.input(),"w-full rounded-none rounded-s pe-8")),()=>j(C(M.input(),"w-full pe-8")),()=>j(C(M.button()))]),ke($,()=>e(_),a=>k(_,a)),ke(Q,()=>e(E),a=>k(E,a)),v(f,X),Ce(),T()}Le(["click"]);function za(f,o){je(o,!0),ea();var y=ve();Qe(A=>{w(T=>qe.title=T,[aa])});var B=L(y);Je(B,()=>o.data.alko,null,(A,T)=>{ya(A,{get kaljakori(){return e(T).kaljakori}})}),v(f,y),Ce()}export{za as component,Oa as universal};
