import{a as pe,s as ze}from"../chunks/B1IEMRCk.js";import{j as Le,a as je,a8 as Be,k as M,a9 as D,S as Ke,g as e,aa as I,s as k,a1 as Ne,i as f,m as l,q as r,o as n,n as J,v as w,a7 as P,d as v,e as Ce,f as L,b as ve,ab as Qe,ac as qe}from"../chunks/Blx9tMFz.js";import{P as De,a as Je}from"../chunks/Bk0acZ1W.js";import{b as he,i as O}from"../chunks/D90skVT9.js";import{s as xe,e as be,a as ke,b as we}from"../chunks/2tuZ5JlQ.js";import{C as Re,e as R,k as ye,m as Ge,n as Ue,I as z,g as j,t as C,h as V,i as S,o as We,j as Xe,A as Ye}from"../chunks/Dz1ThuZh.js";import{S as Ze,P as ea}from"../chunks/By9aO5cc.js";import{s as aa,h as Pe,g as ta}from"../chunks/LXmW7SWr.js";import{i as ra,A as sa,a as la}from"../chunks/Bd-HB-3y.js";import{F as oa}from"../chunks/DgZ9aPTJ.js";import{p as na}from"../chunks/jgrIKtcs.js";async function ia({parent:g}){return{data:await g()}}const Ia=Object.freeze(Object.defineProperty({__proto__:null,load:ia},Symbol.toStringTag,{value:"Module"}));var ua=f("<option> </option>"),da=(g,o,y)=>{k(o,!e(o)),e(y)?.scroll({index:0,smoothScroll:!1})},va=f('<button><span class="hidden whitespace-nowrap md:block"> </span> <!></button>'),ca=f("<option> </option>"),_a=(g,o)=>{e(o)?.toggleFilterElement()},ma=f("<button><span> </span> <!></button>"),ga=(g,o)=>{e(o)?.scroll({index:0,smoothScroll:!1})},fa=(g,o)=>o().showModal(),pa=f("<button><span>Lisää listaan</span> <!></button>"),ha=f('<h2 class="text-xl">Valitse lista</h2> <!>',1),xa=f('<div class="absolute top-0 left-0 flex flex-nowrap items-center gap-0.5 rounded-br bg-gray-100 px-1.5 py-0.5 text-sm text-gray-500"><!> <span> </span></div> <!>',1),ba=f("<p>Ei tuloksia</p>"),ka=f('<div class="relative grid h-full grid-cols-[auto_1fr] max-h-full overflow-hidden"><aside class="z-10 flex h-full flex-col max-h-full overflow-hidden border-gray-300 md:w-84 md:border-r"><!></aside> <main class="mx-auto flex h-full w-full flex-col gap-3 bg-gray-50 p-4 md:gap-4 md:p-6"><div class="flex w-full flex-col items-start gap-4"><div><div class="flex flex-col"><label class="text-sm"></label> <div class="flex flex-row flex-nowrap"><select name="sortingColumn" id="sortingColumn"></select> <!></div></div> <div class="flex flex-col"><label class="text-sm">Korostus</label> <select name="selectedHighlight" id="selectedHighlight"></select></div> <!></div></div> <div class="flex flex-row flex-wrap items-center justify-between gap-2"><p> </p> <button><!> <span> </span></button></div> <div class="flex flex-auto flex-col"><!></div> <!></main></div>');function wa(g,o){je(o,!0);const y=()=>pe(We,"$searchQuery",A),B=()=>pe(Xe,"$isMobile",A),[A,T]=ze();let c=Be(Re.SearchParamsManager),K=M(null),G=M(null),U=M(D(ra(o.kaljakori,na.url.searchParams))),N=M(D([])),$=M(D(c.getParameter("highlight")||R)),_=M(D(c.getParameter("sort")||R)),p=I(()=>ye[e(_)]||!1),W=I(()=>{let a={...e(U)};Object.keys(a).forEach(s=>{Array.isArray(a[s])&&o.kaljakori.getFilterType(s)!=="number"&&(a[s]=new Set(a[s]))});let t=o.kaljakori.fuzzySearchAndFilter(y(),a);return e(_)&&(t=t.sort((s,i)=>s[e(_)]>i[e(_)]?1:-1)),e(p)||(t=t.reverse()),t});Ke(()=>{const a=c.getParameter("asc")==="true";a!==e(p)&&k(p,a)}),Ne(()=>{c.setParameter("q",y()),e($)!==R?c.setParameter("highlight",e($)):c.setParameter("highlight",""),e(_)!==R?c.setParameter("sort",e(_)):c.setParameter("sort",""),e(p)!==!!ye[e(_)]?c.setParameter("asc",String(e(p))):c.setParameter("asc",""),c.update()});var X=ka(),Y=l(X),Se=l(Y);he(oa(Se,{get kaljakori(){return o.kaljakori},get activeFilters(){return e(N)},set activeFilters(a){k(N,a,!0)},get filterValues(){return e(U)},set filterValues(a){k(U,a,!0)}}),a=>k(G,a,!0),()=>e(G)),r(Y);var ce=n(Y,2),Z=l(ce),ee=l(Z),ae=l(ee),te=l(ae);xe(te,"for","sortingColumn"),te.textContent="Järjestys";var _e=n(te,2),E=l(_e);be(E,21,()=>Ge,ke,(a,t)=>{const s=I(()=>o.kaljakori.getFilterValues(e(t)).length>0);var i=ve(),h=L(i);{var m=d=>{var u=ua(),F=l(u,!0);r(u);var x={};w(H=>{P(F,H),x!==(x=e(t))&&(u.value=(u.__value=e(t))??"")},[()=>Pe(e(t))]),v(d,u)};O(h,d=>{e(s)&&d(m)})}v(a,i)}),r(E);var Fe=n(E,2);{var Me=a=>{var t=va();t.__click=[da,p,K];var s=l(t),i=l(s,!0);r(s);var h=n(s,2);{let m=I(()=>e(p)?"up_arrow_alt":"down_arrow_alt");z(h,{get name(){return e(m)}})}r(t),w((m,d)=>{S(t,1,m),P(i,d)},[()=>j(C(V.button(),"rounded-none rounded-e border-s-0")),()=>aa(e(p),e(_))]),v(a,t)};O(Fe,a=>{e(_)&&a(Me)})}r(_e),r(ae);var re=n(ae,2),me=l(re);xe(me,"for","selectedHighlight");var Q=n(me,2);be(Q,21,()=>Ue,ke,(a,t)=>{const s=I(()=>o.kaljakori.getFilterValues(e(t)).length>0);var i=ve(),h=L(i);{var m=d=>{var u=ca(),F=l(u,!0);r(u);var x={};w(H=>{P(F,H),x!==(x=e(t))&&(u.value=(u.__value=e(t))??"")},[()=>Pe(e(t))]),v(d,u)};O(h,d=>{e(s)&&d(m)})}v(a,i)}),r(Q),r(re);var Ve=n(re,2);{var Ae=a=>{var t=ma();t.__click=[_a,G];var s=l(t),i=l(s);r(s);var h=n(s,2);z(h,{name:"filter"}),r(t),w(m=>{S(t,1,m),P(i,`Näytä suodattimet ${e(N).length>0?`(${e(N).length} valittu)`:""}`)},[()=>j(C(V.button(),"col-span-full w-full"))]),v(a,t)};O(Ve,a=>{B()&&a(Ae)})}r(ee),r(Z);var se=n(Z,2),le=l(se),Te=l(le);r(le);var q=n(le,2);q.__click=[ga,K];var ge=l(q);z(ge,{name:"arrow_to_top"});var fe=n(ge,2),$e=l(fe,!0);r(fe),r(q),r(se);var oe=n(se,2),Ee=l(oe);he(Ze(Ee,{get items(){return e(W)},itemsClass:"flex flex-col gap-3",renderItem:(t,s=J,i=J)=>{ea(t,{get product(){return s()},get highlight(){return e($)},get kaljakori(){return o.kaljakori},renderExtras:m=>{var d=xa(),u=L(d),F=l(u);z(F,{name:"hashtag"});var x=n(F,2),H=l(x,!0);r(x),r(u);var Oe=n(u,2);De(Oe,{class:"gap-4 p-4",renderButton:(ne,ie=J)=>{var b=pa();b.__click=[fa,ie];var ue=n(l(b),2);z(ue,{name:"plus"}),r(b),w(de=>S(b,1,de),[()=>j(C(V.button({type:"positive"}),"ml-auto"))]),v(ne,b)},renderContent:(ne,ie=J)=>{var b=ha(),ue=n(L(b),2);sa(ue,{action:de=>{la(de,s()[Ye.Number]),ie().close()}}),v(ne,b)},$$slots:{renderButton:!0,renderContent:!0}}),w(()=>P(H,`${i()+1}`)),v(m,d)},$$slots:{renderExtras:!0}})},$$slots:{renderItem:!0}}),t=>k(K,t,!0),()=>e(K)),r(oe);var He=n(oe,2);{var Ie=a=>{var t=ba();v(a,t)};O(He,a=>{e(W).length==0&&a(Ie)})}r(ce),r(X),w((a,t,s,i)=>{S(ee,1,a),S(E,1,t),S(Q,1,s),P(Te,`Tulosten määrä: ${e(W).length??""}`),S(q,1,i),P($e,B()?"Alkuun":"Hyppää alkuun")},[()=>j(C("grid w-full grid-cols-2 items-end gap-2 md:w-fit")),()=>j(C(V.input(),"w-full rounded-none rounded-s pe-8")),()=>j(C(V.input(),"w-full pe-8")),()=>j(C(V.button()))]),we(E,()=>e(_),a=>k(_,a)),we(Q,()=>e($),a=>k($,a)),v(g,X),Ce(),T()}Le(["click"]);function Oa(g,o){je(o,!0);var y=ve();Qe(A=>{w(T=>qe.title=T,[ta])});var B=L(y);Je(B,()=>o.data.alko,null,(A,T)=>{wa(A,{get kaljakori(){return e(T).kaljakori}})}),v(g,y),Ce()}export{Oa as component,Ia as universal};
