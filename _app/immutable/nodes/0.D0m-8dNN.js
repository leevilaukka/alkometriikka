import{b as ta,r as ra,c as sa,v as Ne,d as na}from"../chunks/DZtLSn5d.js";import{q as te,F as Re,L as Ue,I as y,e as i,t as l,f as u,g as d,b as oa,i as Ce,M as ue,N as ia,O as la,P as da,p as Je,G as ca,Q as Me,R as ua,C as va,k as Be}from"../chunks/D2H9T7Pv.js";import{K as pa}from"../chunks/D9o_Nv1L.js";import{r as ae,s as ie,e as ma,a as _a,b as ha}from"../chunks/Bxanz9Be.js";import{s as qe,a as ve,b as pe}from"../chunks/hii8YTFM.js";import{m as Ke,b as Qe,n as Ie,g as ze,k,v as t,w as a,x as r,y as q,e as p,f as X,j as f,o as fa,z as O,a9 as me,d as De,aA as ka,ac as Ve,s as Oe,aB as ba,a3 as He,X as ga}from"../chunks/DDtI3ySZ.js";import{P as xa,a as wa}from"../chunks/DADVxvfE.js";import{i as $}from"../chunks/MADWfPdD.js";import{c as ce,b as Ge}from"../chunks/Dp9Vh1qo.js";import{p as Fe}from"../chunks/D-OOAyNg.js";import{B as ya}from"../chunks/B9dOkVCg.js";function Pa(c,e){return ta+ra(c,e)}const La=!1,ja=!1;function Sa(){return Pa("/")+"data.json"}async function $a({fetch:c}){const e=await c(Sa());if(!e.ok)throw new Error(`Hinnaston lataaminen epäonnistui: ${e.status} ${e.statusText}`);return await e.text()}function Ta(c){try{const{table:e,metadata:o}=JSON.parse(c);if(!e)throw new Error("Hinnaston purku epäonnistui");if(e.length===0)throw new Error("Hinnasto on tyhjä tai väärässä muodossa");const m=Object.values(Re);if(e[0][0]!==Re.Number)throw new Error("Hinnasto on tyhjä tai väärässä muodossa");return e[0].forEach(Y=>{if(!m.includes(Y))throw new Error(`Tuntematon sarake datassa: ${Y}`)}),{table:e,metadata:o}}catch{throw"Hinnaston lataus epäonnistui"}}async function Aa({fetch:c}){const e=await $a({fetch:c});return Ta(e)}async function Ea({fetch:c}){return new Promise(async(e,o)=>{try{const m=await Aa({fetch:c});e({dataset:m,kaljakori:new pa(m.table,te)})}catch(m){o(m)}})}async function Ma({fetch:c}){return{alko:Ea({fetch:c})}}const ft=Object.freeze(Object.defineProperty({__proto__:null,load:Ma,prerender:ja,ssr:La},Symbol.toStringTag,{value:"Module"})),Oa=""+new URL("../assets/Logo_rounded@0.5x.DBZdTOkC.png",import.meta.url).href;class Ha{params=new URLSearchParams;persistentParams=new URLSearchParams;mergedParams=new URLSearchParams;constructor(e){this.params=e.searchParams}update(){this.mergedParams=new URLSearchParams([...this.params,...this.persistentParams]);let e=window.location.pathname;this.mergedParams.size&&(e+=`?${this.mergedParams.toString()}`),sa(e,{})}reset(){this.params=new URLSearchParams}addParameter(e,o){return Ue(o)?this.params.delete(e):this.params.append(e,o),this}setParameter(e,o){return Ue(o)?this.params.delete(e):this.params.set(e,o),this}setParametersFromObject(e){return Object.entries(e).forEach(([o,m])=>{this.params.delete(o),Array.isArray(m)?m.forEach(Y=>this.addParameter(o,Y)):this.addParameter(o,m)}),this}setParametersFromURL(e){this.params=e.searchParams}addPersistentParameter(e,o){return this.persistentParams.append(e,o??""),this}setPersistentParameter(e,o){return this.persistentParams.set(e,o),this}getParameter(e){return this.params.get(e)}getAllParameters(e){return this.params.getAll(e)}getAll(){return this.mergedParams}getPersistentParameter(e){return this.persistentParams.get(e)}getAllPersistentParameters(e){return this.persistentParams.getAll(e)}}var Ca=(c,e)=>{oa("open_settings"),e().showModal()},Ia=k('<span class="text-sm">Asetukset</span>'),Da=k("<button><!><!></button>"),Na=k('<span class="text-sm">Henkilökohtaiset tiedot</span>'),Ra=k('<span class="text-sm">Lisäasetukset</span>'),Ua=k('<span class="text-sm">Tietoa</span>'),Ba=(c,e)=>e().close(),Va=k(`<div class="prose dark:prose-invert"><h2 class="text-lg font-bold">Tietoa</h2> <p>Alkometriikka on <a target="_blank">avoimen lähdekoodin</a> web-sovellus, joka listaa Alkon tuotevalikoiman ja antaa käyttäjille hieman laskennallista
					tietoa tuotteista.</p> <p>Hinnasto ladataan Alkon julkisesta Excel-tiedostosta. Tiedostoa päivitetään noin
					vuorokauden viiveellä. Voit ladata sen <a referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank">täältä</a>.</p> <p>Voit lähettää kehitysehdotuksia ja bugiraportteja GitHubin kautta. <br/> <a>Lähetä kehitysehdotus</a> | <a>Lähetä bugiraportti</a></p> <p>Muut yhteydenotot voi lähettää sähköpostitse osoitteeseen <a href="mailto:contact@alkometriikka.fi">contact@alkometriikka.fi</a>.</p></div> <div class="flex flex-row items-center gap-2"><a target="_blank"><!> <span>GitHub</span></a> <a href="mailto:contact@alkometriikka.fi" target="_blank"><!> <span>Sähköposti</span></a></div> <p class="text-sm text-secondary">Versio: <a target="_blank"> </a> <!></p> <button>Sulje</button>`,1),Fa=()=>{ia()},Ja=()=>{la()},qa=(c,e)=>{da(),e().close()},Ka=(c,e)=>e().close(),Qa=k(`<div class="prose dark:prose-invert"><h2 class="text-lg font-bold">Lisäasetukset</h2></div> <div class="flex flex-col gap-2"><p class="text-sm font-bold">Teema</p> <div class="flex flex-row gap-0"><label for="system"><input type="radio" id="system" class="hidden"/> <!> <span>Järjestelmä</span></label> <label for="light"><input type="radio" id="light" class="hidden"/> <!> <span>Vaalea</span></label> <label for="dark"><input type="radio" id="dark" class="hidden"/> <!> <span>Tumma</span></label></div></div> <div class="flex flex-col gap-2"><p class="text-sm font-bold">Vie / tuo tiedot</p> <p class="text-sm text-secondary">Tällä voit viedä tai tuoda paikallisesti tallennetut tiedot, kuten henkilökohtaiset tiedot
					ja mukautetut listat. Tiedot tallennetaan JSON-muodossa.</p> <div class="flex flex-row gap-2"><button><!> <span>Vie tiedot</span></button> <button><!> <span>Tuo tiedot</span></button></div></div> <div class="flex flex-col gap-2"><p class="text-sm font-bold">Tyhjennä tiedot</p> <p class="text-sm text-secondary">Tämä poistaa kaikki paikallisesti tallennetut tiedot, kuten henkilökohtaiset tiedot ja
					mukautetut listat. Tätä toimintoa ei voi perua.</p> <button><!> <span>Tyhjennä</span></button></div> <button>Sulje</button>`,1),za=k('<p class="text-xs text-red-600">Painon tulee olla suurempi kuin 1 kg tai tyhjä.</p>'),Ga=k("<option> </option>"),Wa=(c,e)=>e().close(),Xa=()=>window.location.reload(),Ya=k(`<div class="prose dark:prose-invert"><h2 class="text-lg font-bold">Henkilökohtaiset tiedot</h2> <p class="text-sm text-secondary">Nämä tiedot vaikuttavat promillearvioihin. Annetut tiedot tallennetaan vain paikallisesti,
					eikä niitä lähetetä mihinkään. Jos et anna tietoja, promillearviot perustuvat
					oletusarvoihin.</p></div> <div class="flex flex-col"><label for="weight" class="text-sm">Paino (kg)</label> <input type="number" name="weight" placeholder="Paino (kg)" min="1" max="500" step="0.1"/> <!></div> <div class="flex flex-col"><label for="gender" class="text-sm">Sukupuoli</label> <select name="gender"><option>Valitse sukupuoli</option><!></select></div> <p class="self-end text-xs text-secondary">Tallentaminen lataa sivun uudelleen.</p> <div class="grid grid-cols-2 gap-3"><button>Sulje</button> <button>Tallenna</button></div>`,1),Za=k('<div class="flex flex-row gap-2"><label for="personal"><input type="radio" id="personal" name="tab" class="hidden"/> <!> <!></label> <label for="settings"><input type="radio" id="settings" name="tab" class="hidden"/> <!> <!></label> <label for="info"><input type="radio" id="info" name="tab" class="hidden"/> <!> <!></label></div> <!>',1);function et(c,e){Qe(e,!0);const o=()=>ve(Ce,"$isMobile",re),m=()=>ve(ue,"$theme",re),Y=()=>ve(Je,"$isLaptop",re),[re,je]=qe(),se=[],ne=[];let T=fa("personal");xa(c,{class:"gap-4 p-4",renderButton:(_e,v=Ie)=>{var P=Da();P.__click=[Ca,v];var A=t(P);{var E=b=>{var H=Ia();p(b,H)};$(A,b=>{o()||b(E)})}var L=a(A);y(L,{name:"cog"}),r(P),q(b=>d(P,1,b),[()=>i(l(u.button(),"p-2 text-xl"))]),p(_e,P)},renderContent:(_e,v=Ie)=>{var P=Za(),A=X(P),E=t(A),L=t(E);ae(L),L.value=L.__value="personal";var b=a(L,2);y(b,{name:"user"});var H=a(b,2);{var oe=s=>{var n=Na();p(s,n)};$(H,s=>{o()||s(oe)})}r(E);var Z=a(E,2),R=t(Z);ae(R),R.value=R.__value="settings";var xe=a(R,2);y(xe,{name:"cog"});var we=a(xe,2);{var ye=s=>{var n=Ra();p(s,n)};$(we,s=>{o()||s(ye)})}r(Z);var he=a(Z,2),K=t(he);ae(K),K.value=K.__value="info";var le=a(K,2);y(le,{name:"info_circle"});var Pe=a(le,2);{var Te=s=>{var n=Ua();p(s,n)};$(Pe,s=>{o()||s(Te)})}r(he),r(A);var Ae=a(A,2);{var Ee=s=>{var n=Va(),h=X(n),U=a(t(h),2),fe=a(t(U));ie(fe,"href","https://github.com/leevilaukka/alkometriikka"),O(),r(U);var g=a(U,2),C=a(t(g));ie(C,"href","https://www.alko.fi/INTERSHOP/static/WFS/Alko-OnlineShop-Site/-/Alko-OnlineShop/fi_FI/Alkon%20Hinnasto%20Tekstitiedostona/alkon-hinnasto-tekstitiedostona.xlsx"),O(),r(g);var B=a(g,2),Q=a(t(B),3);ie(Q,"href","https://github.com/leevilaukka/alkometriikka/issues/new?template=feature_request.md");var V=a(Q,2);ie(V,"href","https://github.com/leevilaukka/alkometriikka/issues/new?template=bug_report.md"),r(B),O(2),r(h);var j=a(h,2),F=t(j);ie(F,"href","https://github.com/leevilaukka/alkometriikka");var J=t(F);y(J,{name:"github",class:"inline-block"}),O(2),r(F);var x=a(F,2),ke=t(x);y(ke,{name:"mail_send",class:"inline-block"}),O(2),r(x),r(j);var z=a(j,2),w=a(t(z)),ee=t(w,!0);r(w);var G=a(w,2);{var de=D=>{var S=ka();q(_=>me(S,`| Hinnaston päiväys: ${_??""}`),[()=>new Date(e.alko.dataset.metadata.CreatedDate).toLocaleDateString("fi-FI")]),p(D,S)};$(G,D=>{e.alko.dataset.metadata.CreatedDate&&D(de)})}r(z);var I=a(z,2);I.__click=[Ba,v],q((D,S,_)=>{d(F,1,D),d(x,1,S),ie(w,"href",`https://github.com/leevilaukka/alkometriikka/commit/${Ne}`),me(ee,Ne),d(I,1,_)},[()=>i(l(u.button())),()=>i(l(u.button())),()=>i(l(u.button(),"w-full"))]),p(s,n)},Le=s=>{var n=De(),h=X(n);{var U=g=>{var C=Qa(),B=a(X(C),2),Q=a(t(B),2),V=t(Q),j=t(V);ae(j),j.value=j.__value="";var F=a(j,2);{let W=Ve(()=>o()?"mobile":Y()?"laptop":"desktop");y(F,{get name(){return f(W)}})}O(2),r(V);var J=a(V,2),x=t(J);ae(x),x.value=x.__value="light";var ke=a(x,2);y(ke,{name:"sun"}),O(2),r(J);var z=a(J,2),w=t(z);ae(w),w.value=w.__value="dark";var ee=a(w,2);y(ee,{name:"moon"}),O(2),r(z),r(Q),r(B);var G=a(B,2),de=a(t(G),4),I=t(de);I.__click=[Fa];var D=t(I);y(D,{name:"download"}),O(2),r(I);var S=a(I,2);S.__click=[Ja];var _=t(S);y(_,{name:"upload"}),O(2),r(S),r(de),r(G);var N=a(G,2),M=a(t(N),4);M.__click=[qa,v];var be=t(M);y(be,{name:"trash"}),O(2),r(M),r(N);var ge=a(N,2);ge.__click=[Ka,v],q((W,We,Xe,Ye,Ze,ea,aa)=>{d(V,1,W),d(J,1,We),d(z,1,Xe),d(I,1,Ye),d(S,1,Ze),d(M,1,ea),d(ge,1,aa)},[()=>i(l(u.button(),"rounded-e-none","has-checked:bg-secondary")),()=>i(l(u.button(),"rounded-none border-x-0","has-checked:bg-secondary")),()=>i(l(u.button(),"rounded-s-none","has-checked:bg-secondary")),()=>i(l(u.button())),()=>i(l(u.button())),()=>i(l(u.button({type:"negative"}))),()=>i(l(u.button(),"w-full"))]),ce(ne,[],j,()=>m(),W=>pe(ue,W)),ce(ne,[],x,()=>{"light";return m()},W=>pe(ue,W)),ce(ne,[],w,()=>{"dark";return m()},W=>pe(ue,W)),p(g,C)},fe=g=>{var C=De(),B=X(C);{var Q=V=>{const j=Ve(()=>te.weight==null||te.weight>=1);var F=Ya(),J=a(X(F),2),x=a(t(J),2);ae(x);var ke=a(x,2);{var z=_=>{var N=za();p(_,N)};$(ke,_=>{f(j)||_(z)})}r(J);var w=a(J,2),ee=a(t(w),2),G=t(ee);G.value=(G.__value=null)??"";var de=a(G);ma(de,17,()=>Object.values(ca),_a,(_,N)=>{var M=Ga(),be=t(M,!0);r(M);var ge={};q(()=>{me(be,f(N)),ge!==(ge=f(N))&&(M.value=(M.__value=f(N))??"")}),p(_,M)}),r(ee),r(w);var I=a(w,4),D=t(I);D.__click=[Wa,v];var S=a(D,2);S.__click=[Xa],r(I),q((_,N,M,be)=>{d(x,1,_),d(ee,1,N),d(D,1,M),d(S,1,be),S.disabled=!f(j)},[()=>i(l(u.input(),"w-full")),()=>i(l(u.input(),"w-full")),()=>i(l(u.button(),"w-full")),()=>i(l(u.button({type:"positive"}),"w-full",f(j)?"":"cursor-not-allowed opacity-50"))]),Ge(x,()=>te.weight,_=>te.weight=_),ha(ee,()=>te.gender,_=>te.gender=_),p(V,F)};$(B,V=>{f(T)==="personal"&&V(Q)},!0)}p(g,C)};$(h,g=>{f(T)==="settings"?g(U):g(fe,!1)},!0)}p(s,n)};$(Ae,s=>{f(T)==="info"?s(Ee):s(Le,!1)})}q((s,n,h)=>{d(E,1,s),d(Z,1,n),d(he,1,h)},[()=>i(l(u.button(),"w-full","has-checked:bg-secondary")),()=>i(l(u.button(),"w-full","has-checked:bg-secondary")),()=>i(l(u.button(),"w-full","has-checked:bg-secondary"))]),ce(se,[],L,()=>f(T),s=>Oe(T,s)),ce(se,[],R,()=>f(T),s=>Oe(T,s)),ce(se,[],K,()=>f(T),s=>Oe(T,s)),p(_e,P)},$$slots:{renderButton:!0,renderContent:!0}}),ze(),je()}Ke(["click"]);var at=k('<div><div><!></div> <input id="searchQuery" type="text" placeholder="Hae nimellä..."/></div>'),tt=k('<span class="text-sm">Listat</span>'),rt=k(' <div class="flex h-full w-full flex-col"><!> <header class="relative flex h-fit items-center gap-2 md:gap-4 bg-primary border-b border-primary py-2 px-4"><a href="/" class="flex shrink-0 flex-row items-center gap-3 bg-primary"><img alt="Alkometriikka Logo" class="aspect-square h-10 rounded object-contain"/> <span class="hidden text-[1.75rem] text-brand-3 dark:text-white sm:block">Alkometriikka</span></a> <!> <div class="flex items-center gap-2 ms-auto"><!> <a href="/listat"><button><!><!></button></a> <!></div></header> <div class="flex max-h-full overflow-y-auto overflow-x-hidden flex-auto flex-col"><!></div></div>',1),st=()=>location.reload(),nt=k(' <div class="grid h-full w-full max-h-full overflow-hidden place-content-center"><div class="flex flex-col items-center gap-3"><p> </p> <button class="rounded bg-brand-1 px-4 py-2 text-white">Yritä uudelleen</button></div></div>',1);function kt(c,e){Qe(e,!0);const o=()=>ve(ue,"$theme",re),m=()=>ve(Ce,"$isMobile",re),Y=()=>ve(Be,"$searchQuery",re),[re,je]=qe();let se=new Ha(Fe.url);ba(va.SearchParamsManager,se),He(()=>{localStorage.setItem(Me.PersonalInfo,JSON.stringify(te))}),He(()=>{localStorage.setItem(Me.Lists,JSON.stringify(ua))}),He(()=>{localStorage.setItem(Me.Theme,o())});const ne=window.matchMedia("(prefers-color-scheme: dark)");function T(v){v.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}ue.subscribe(v=>{ne.removeEventListener("change",T),v==="dark"?document.documentElement.classList.add("dark"):v==="light"?document.documentElement.classList.remove("dark"):(ne.matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),ne.addEventListener("change",T))}),window.addEventListener("resize",()=>{pe(Ce,window.matchMedia("(width < 48rem)").matches),pe(Je,window.matchMedia("(width < 1280px)").matches)}),na(({to:v})=>{v&&v.url.origin===window.location.origin&&(se.setParametersFromURL(v.url),se.update())});function Se(){document.getElementById("main-loader")?.classList.add("shift")}var $e=De(),_e=X($e);wa(_e,()=>e.data.alko,null,(v,P)=>{var A=rt(),E=X(A),L=a(E),b=t(L);$(b,n=>{});var H=a(b,2),oe=t(H),Z=t(oe);O(2),r(oe);var R=a(oe,2);{var xe=n=>{var h=at(),U=t(h),fe=t(U);y(fe,{name:"search"}),r(U);var g=a(U,2);ae(g),r(h),q((C,B,Q)=>{d(h,1,C),d(U,1,B),d(g,1,Q)},[()=>i(l("flex w-full flex-row","rounded border border-primary")),()=>i(l(u.button(),"aspect-square border-0 bg-white text-black","p-2 text-xl","rounded-e-none border-e-0")),()=>i(l(u.input(),"text-md w-full gap-2 rounded-s-none border-0 border-s hover:border-primary"))]),Ge(g,Y,C=>pe(Be,C)),p(n,h)};$(R,n=>{Fe.route.id!=="/tuotteet/[...id]"&&n(xe)})}var we=a(R,2),ye=t(we);{var he=n=>{ya(n,{get kaljakori(){return f(P).kaljakori}})};$(ye,n=>{m()&&n(he)})}var K=a(ye,2),le=t(K),Pe=t(le);{var Te=n=>{var h=tt();p(n,h)};$(Pe,n=>{m()||n(Te)})}var Ae=a(Pe);y(Ae,{name:"list_ul"}),r(le),r(K);var Ee=a(K,2);et(Ee,{get alko(){return f(P)}}),r(we),r(H);var Le=a(H,2),s=t(Le);ga(s,()=>e.children??Ie),r(Le),r(L),q((n,h)=>{me(E,`${n??""} `),ie(Z,"src",Oa),d(le,1,h)},[Se,()=>i(l(u.button(),"p-2 text-xl"))]),p(v,A)},(v,P)=>{var A=nt(),E=X(A),L=a(E),b=t(L),H=t(b),oe=t(H);r(H);var Z=a(H,2);Z.__click=[st],r(b),r(L),q(R=>{me(E,`${R??""} `),me(oe,`Virhe datan lataamisessa: ${f(P).message??""}`)},[Se]),p(v,A)}),p(c,$e),ze(),je()}Ke(["click"]);export{kt as component,ft as universal};
