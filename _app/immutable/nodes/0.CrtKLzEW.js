import{b as Bt,r as zt,c as Jt,v as Mt,d as Kt}from"../chunks/o1WFV9BS.js";import{p as Y,w as At,I as D,g as v,t as p,h as f,i as m,j as xt,G as Gt,L as Ht,l as Qt,q as Wt,C as Zt,o as Tt}from"../chunks/Dz1ThuZh.js";import{K as Yt}from"../chunks/pR69dnPu.js";import{l as Xt,s as wt,r as Ut,e as yt,a as Pt,b as ta,d as ct,f as Ot}from"../chunks/2tuZ5JlQ.js";import{s as Dt,a as jt,b as kt}from"../chunks/B1IEMRCk.js";import{j as Et,a as Nt,n as St,e as Vt,i as b,m as r,o as a,q as e,v as A,d as u,f as et,s as mt,k as Ft,g as s,w as rt,a7 as vt,b as $t,aH as aa,aa as pt,aI as ea,a1 as Ct,a9 as ra,V as sa}from"../chunks/Blx9tMFz.js";import{P as oa,a as ia}from"../chunks/Bk0acZ1W.js";import{i as M}from"../chunks/D90skVT9.js";import{t as na,f as la}from"../chunks/D9pBzadF.js";import{b as qt}from"../chunks/_P1QabsG.js";import{p as It}from"../chunks/jgrIKtcs.js";import{i as Rt,d as ca,e as da,j as ua}from"../chunks/LXmW7SWr.js";import{B as va}from"../chunks/CTG7snjS.js";function pa(n,t){return Bt+zt(n,t)}const ma=!1,ha=!1;function _a(){return pa("/")+"data.txt"}async function fa({fetch:n}){const t=await n(_a());if(!t.ok)throw new Error(`Hinnaston lataaminen epäonnistui: ${t.status} ${t.statusText}`);return await t.text()}function ba(n){const t=Xt.decompressFromUTF16(n);try{const{table:o,metadata:P}=JSON.parse(t);if(!o)throw new Error("Hinnaston purku epäonnistui");if(o.length===0)throw new Error("Hinnasto on tyhjä tai väärässä muodossa");const G=Object.values(At);if(o[0][0]!==At.Number)throw new Error("Hinnasto on tyhjä tai väärässä muodossa");return o[0].forEach(j=>{if(!G.includes(j))throw new Error(`Tuntematon sarake datassa: ${j}`)}),{table:o,metadata:P}}catch{throw"Hinnaston lataus epäonnistui"}}async function ga({fetch:n}){const t=await fa({fetch:n});return ba(t)}async function ka({fetch:n}){return new Promise(async(t,o)=>{try{const P=await ga({fetch:n});t({dataset:P,kaljakori:new Yt(P.table,Y)})}catch(P){o(P)}})}async function xa({fetch:n}){return{alko:ka({fetch:n})}}const he=Object.freeze(Object.defineProperty({__proto__:null,load:xa,prerender:ha,ssr:ma},Symbol.toStringTag,{value:"Module"})),wa=""+new URL("../assets/Logo_rounded@0.5x.DBZdTOkC.png",import.meta.url).href,ya="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20data-name='Layer%201'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%201024%201024'%3e%3cdefs%3e%3cstyle%3e%20.cls-1%20{%20fill:%20%23bf1616;%20}%20.cls-2%20{%20fill:%20%23e51b15;%20}%20.cls-3%20{%20fill:%20none;%20}%20.cls-4%20{%20fill:%20%23960f0f;%20}%20.cls-5%20{%20clip-path:%20url(%23clippath);%20}%20%3c/style%3e%3cclipPath%20id='clippath'%3e%3crect%20class='cls-3'%20width='1024'%20height='1024'/%3e%3c/clipPath%3e%3c/defs%3e%3cg%20class='cls-5'%3e%3crect%20class='cls-2'%20y='512'%20width='341.33'%20height='512'/%3e%3crect%20class='cls-4'%20x='682.67'%20y='682.67'%20width='341.33'%20height='341.33'/%3e%3cpath%20class='cls-1'%20d='M682.67,473.68v550.32h-341.34V473.68c0-60.39,31.37-113.45,78.7-143.79,15.25-9.77,24.63-26.48,24.63-44.58V96.78h134.68v188.53c0,18.11,9.39,34.81,24.63,44.58,47.33,30.34,78.7,83.4,78.7,143.79Z'/%3e%3c/g%3e%3c/svg%3e";class Pa{params=new URLSearchParams;persistentParams=new URLSearchParams;mergedParams=new URLSearchParams;constructor(t){this.params=t.searchParams}update(){this.mergedParams=new URLSearchParams([...this.params,...this.persistentParams]);let t=window.location.pathname;this.mergedParams.size&&(t+=`?${this.mergedParams.toString()}`),Jt(t,{})}reset(){this.params=new URLSearchParams}addParameter(t,o){return Rt(o)?this.params.delete(t):this.params.append(t,o),this}setParameter(t,o){return Rt(o)?this.params.delete(t):this.params.set(t,o),this}setParametersFromObject(t){return Object.entries(t).forEach(([o,P])=>{this.params.delete(o),Array.isArray(P)?P.forEach(G=>this.addParameter(o,G)):this.addParameter(o,P)}),this}setParametersFromURL(t){this.params=t.searchParams}addPersistentParameter(t,o){return this.persistentParams.append(t,o??""),this}setPersistentParameter(t,o){return this.persistentParams.set(t,o),this}getParameter(t){return this.params.get(t)}getAllParameters(t){return this.params.getAll(t)}getAll(){return this.mergedParams}getPersistentParameter(t){return this.persistentParams.get(t)}getAllPersistentParameters(t){return this.persistentParams.getAll(t)}}var ja=(n,t)=>t().showModal(),Sa=b('<span class="text-sm">Asetukset</span>'),$a=b("<button><!><!></button>"),La=(n,t)=>mt(t,"personal"),Ma=b('<span class="ms-2">Henkilökohtaiset tiedot</span>'),Aa=(n,t)=>mt(t,"settings"),Ha=b('<span class="ms-2">Lisäasetukset</span>'),Ta=(n,t)=>mt(t,"info"),Oa=b('<span class="ms-2">Tietoa</span>'),Ca=(n,t)=>t().close(),Ia=b(`<div class="prose"><h2 class="text-lg font-bold">Tietoa</h2> <p>Alkometriikka on <a href="https://github.com/leevilaukka/alkometriikka" target="_blank">avoimen lähdekoodin</a> web-sovellus, joka listaa Alkon tuotevalikoiman ja antaa käyttäjille hieman laskennallista
								tietoa tuotteista.</p> <p>Hinnasto ladataan Alkon julkisesta Excel-tiedostosta. Tiedostoa päivitetään noin
								vuorokauden viiveellä. Voit ladata sen <a href="https://www.alko.fi/INTERSHOP/static/WFS/Alko-OnlineShop-Site/-/Alko-OnlineShop/fi_FI/Alkon%20Hinnasto%20Tekstitiedostona/alkon-hinnasto-tekstitiedostona.xlsx" target="_blank" rel="noopener noreferrer">täältä</a>.</p> <p>Voit lähettää kehitysehdotuksia ja bugiraportteja GitHubin kautta. <br/> <a href="https://github.com/leevilaukka/alkometriikka/issues/new?template=feature_request.md">Lähetä kehitysehdotus</a> | <a href="https://github.com/leevilaukka/alkometriikka/issues/new?template=bug_report.md">Lähetä bugiraportti</a></p> <p>Muut yhteydenotot voi lähettää sähköpostitse osoitteeseen <a href="mailto:alkometriikka@proton.me">alkometriikka@proton.me</a>.</p></div> <div class="flex flex-row items-center gap-2"><a href="https://github.com/leevilaukka/alkometriikka" target="_blank"><!> <span>GitHub</span></a> <a href="mailto:alkometriikka@proton.me" target="_blank"><!> <span>Sähköposti</span></a></div> <p class="text-sm text-gray-600">Versio: <a> </a> <!></p> <button>Sulje</button>`,1),Ra=()=>{ca()},Ua=()=>{da()},Da=(n,t)=>{ua(),t().close()},Ea=(n,t)=>t().close(),Na=b(`<div class="prose"><h2 class="text-lg font-bold">Lisäasetukset</h2></div> <div><p>Vie / tuo tiedot</p> <p class="text-sm text-gray-600">Tällä voit viedä tai tuoda paikallisesti tallennetut tiedot, kuten henkilökohtaiset
								tiedot ja mukautetut listat. Tiedot tallennetaan JSON-muodossa.</p> <div class="flex flex-row gap-2"><button><!> <span>Vie tiedot</span></button> <button><!> <span>Tuo tiedot</span></button></div></div> <div class="flex flex-col gap-2"><p class="text-sm font-bold">Tyhjennä tiedot</p> <p class="text-sm text-gray-600">Tämä poistaa kaikki paikallisesti tallennetut tiedot, kuten henkilökohtaiset tiedot
								ja mukautetut listat. Tätä toimintoa ei voi perua.</p> <button><!> <span>Tyhjennä</span></button></div> <button>Sulje</button>`,1),Va=b('<p class="text-xs text-red-600">Painon tulee olla suurempi kuin 1 kg tai tyhjä.</p>'),Fa=b("<option> </option>"),qa=(n,t)=>t().close(),Ba=()=>window.location.reload(),za=b(`<div class="prose"><h2 class="text-lg font-bold">Henkilökohtaiset tiedot</h2> <p class="text-sm text-gray-600">Nämä tiedot vaikuttavat promillearvioihin. Annetut tiedot tallennetaan vain
								paikallisesti, eikä niitä lähetetä mihinkään. Jos et anna tietoja, promillearviot
								perustuvat oletusarvoihin.</p></div> <div class="flex flex-col"><label for="weight" class="text-sm">Paino (kg)</label> <input type="number" name="weight" placeholder="Paino (kg)" min="1" max="500" step="0.1"/> <!></div> <div class="flex flex-col"><label for="gender" class="text-sm">Sukupuoli</label> <select name="gender"><option>Valitse sukupuoli</option><!></select></div> <p class="self-end text-xs text-gray-600">Tallentaminen lataa sivun uudelleen.</p> <div class="grid grid-cols-2 gap-3"><button>Sulje</button> <button>Tallenna</button></div>`,1),Ja=b('<div class="mb-2 flex flex-row gap-2 border-b border-gray-300 pb-2"><button><!> <!></button> <button><!> <!></button> <button><!> <!></button></div> <!>',1);function Ka(n,t){Nt(t,!0);const o=()=>jt(xt,"$isMobile",P),[P,G]=Dt();let j=Ft("personal");oa(n,{class:"gap-4 p-4",renderButton:(it,B=St)=>{var x=$a();x.__click=[ja,B];var z=r(x);{var N=J=>{var i=Sa();u(J,i)};M(z,J=>{o()||J(N)})}var X=a(z);D(X,{name:"cog"}),e(x),A(J=>m(x,1,J),[()=>v(p(f.button(),"p-2 text-xl"))]),u(it,x)},renderContent:(it,B=St)=>{var x=Ja(),z=et(x),N=r(z);N.__click=[La,j];var X=r(N);D(X,{name:"user"});var J=a(X,2);{var i=l=>{var k=Ma();u(l,k)};M(J,l=>{o()||l(i)})}e(N);var d=a(N,2);d.__click=[Aa,j];var g=r(d);D(g,{name:"cog"});var S=a(g,2);{var y=l=>{var k=Ha();u(l,k)};M(S,l=>{o()||l(y)})}e(d);var w=a(d,2);w.__click=[Ta,j];var Q=r(w);D(Q,{name:"info_circle"});var V=a(Q,2);{var $=l=>{var k=Oa();u(l,k)};M(V,l=>{o()||l($)})}e(w),e(z);var H=a(z,2);{var W=l=>{var k=Ia(),F=a(et(k),2),Z=r(F),nt=r(Z);D(nt,{name:"github",class:"inline-block"}),rt(2),e(Z);var T=a(Z,2),q=r(T);D(q,{name:"mail_send",class:"inline-block"}),rt(2),e(T),e(F);var I=a(F,2),c=a(r(I)),h=r(c,!0);e(c);var O=a(c,2);{var R=_=>{var L=aa();A(K=>vt(L,`| Hinnaston päiväys: ${K??""}`),[()=>new Date(t.alko.dataset.metadata.CreatedDate).toLocaleDateString("fi-FI")]),u(_,L)};M(O,_=>{t.alko.dataset.metadata.CreatedDate&&_(R)})}e(I);var C=a(I,2);C.__click=[Ca,B],A((_,L,K)=>{m(Z,1,_),m(T,1,L),wt(c,"href",`https://github.com/leevilaukka/alkometriikka/commit/${Mt}`),vt(h,Mt),m(C,1,K)},[()=>v(p(f.button())),()=>v(p(f.button())),()=>v(p(f.button(),"w-full"))]),u(l,k)},ht=l=>{var k=$t(),F=et(k);{var Z=T=>{var q=Na(),I=a(et(q),2),c=a(r(I),4),h=r(c);h.__click=[Ra];var O=r(h);D(O,{name:"download"}),rt(2),e(h);var R=a(h,2);R.__click=[Ua];var C=r(R);D(C,{name:"upload"}),rt(2),e(R),e(c),e(I);var _=a(I,2),L=a(r(_),4);L.__click=[Da,B];var K=r(L);D(K,{name:"trash"}),rt(2),e(L),e(_);var st=a(_,2);st.__click=[Ea,B],A((ot,lt,_t,ut)=>{m(h,1,ot),m(R,1,lt),m(L,1,_t),m(st,1,ut)},[()=>v(p(f.button(),"mt-1")),()=>v(p(f.button(),"mt-1")),()=>v(p(f.button({type:"negative"}))),()=>v(p(f.button(),"w-full"))]),u(T,q)},nt=T=>{var q=$t(),I=et(q);{var c=h=>{const O=pt(()=>Y.weight==null||Y.weight>=1);var R=za(),C=a(et(R),2),_=a(r(C),2);Ut(_);var L=a(_,2);{var K=U=>{var tt=Va();u(U,tt)};M(L,U=>{s(O)||U(K)})}e(C);var st=a(C,2),ot=a(r(st),2),lt=r(ot);lt.value=(lt.__value=null)??"";var _t=a(lt);yt(_t,17,()=>Object.values(Gt),Pt,(U,tt)=>{var at=Fa(),gt=r(at,!0);e(at);var Lt={};A(()=>{vt(gt,s(tt)),Lt!==(Lt=s(tt))&&(at.value=(at.__value=s(tt))??"")}),u(U,at)}),e(ot),e(st);var ut=a(st,4),ft=r(ut);ft.__click=[qa,B];var bt=a(ft,2);bt.__click=[Ba],e(ut),A((U,tt,at,gt)=>{m(_,1,U),m(ot,1,tt),m(ft,1,at),m(bt,1,gt),bt.disabled=!s(O)},[()=>v(p(f.input(),"w-full")),()=>v(p(f.input(),"w-full")),()=>v(p(f.button(),"w-full")),()=>v(p(f.button({type:"positive"}),"w-full",s(O)?"":"cursor-not-allowed opacity-50"))]),qt(_,()=>Y.weight,U=>Y.weight=U),ta(ot,()=>Y.gender,U=>Y.gender=U),u(h,R)};M(I,h=>{s(j)==="personal"&&h(c)},!0)}u(T,q)};M(F,T=>{s(j)==="settings"?T(Z):T(nt,!1)},!0)}u(l,k)};M(H,l=>{s(j)==="info"?l(W):l(ht,!1)})}A((l,k,F)=>{m(N,1,l),m(d,1,k),m(w,1,F)},[()=>v(p(f.button(),"w-full",s(j)==="personal"?"bg-gray-200":"")),()=>v(p(f.button(),"w-full",s(j)==="settings"?"bg-gray-200":"")),()=>v(p(f.button(),"w-full",s(j)==="info"?"bg-gray-200":""))]),u(it,x)},$$slots:{renderButton:!0,renderContent:!0}}),Vt(),G()}Et(["click"]);var Ga=b('<div><div><!></div> <input id="searchQuery" type="text" placeholder="Hae nimellä..."/></div>'),Qa=b('<span class="text-sm">Listat</span>'),Wa=b('<div class="flex h-full w-full flex-col"><!> <header class="relative flex h-fit items-center gap-2 md:gap-4 border-b border-gray-300 py-2 px-4"><a href="/" class="flex shrink-0 flex-row items-center gap-3 bg-white"><img alt="Alkometriikka Logo" class="aspect-square h-10 rounded object-contain"/> <span class="hidden text-[1.75rem] text-brand-3 sm:block">Alkometriikka</span></a> <!> <div class="flex items-center gap-2 ms-auto"><!> <a href="/listat"><button><!><!></button></a> <!></div></header> <div class="flex max-h-full overflow-y-auto overflow-x-hidden flex-auto flex-col"><!></div></div>'),Za=()=>location.reload(),Ya=b('<div class="grid h-full w-full max-h-full overflow-hidden place-content-center"><div class="flex flex-col items-center gap-3"><p> </p> <button class="rounded bg-brand-1 px-4 py-2 text-white">Yritä uudelleen</button></div></div>'),Xa=b("<div></div>"),te=b("<div></div>"),ae=b('<div class="fixed inset-0 z-99999 block h-full w-full items-end bg-white"><div class="absolute bottom-0 left-1/2 flex flex-row-reverse flex-nowrap items-end"></div> <img alt="Alkometriikka Logo" class="absolute -bottom-1 left-1/2 aspect-square -translate-x-1/2 rounded object-contain"/> <div class="absolute bottom-0 left-1/2 flex flex-row flex-nowrap items-end"></div> <div class="absolute left-1/2 top-1/3 -translate-1/2 text-center flex flex-col gap-3"><h1 class="text-4xl text-brand-3">Alkometriikka</h1> <p>Ladataan...</p></div></div>');function _e(n,t){Nt(t,!0);const o=()=>jt(xt,"$isMobile",G),P=()=>jt(Tt,"$searchQuery",G),[G,j]=Dt();let dt=new Pa(It.url);ea(Zt.SearchParamsManager,dt),Ct(()=>{localStorage.setItem(Ht.PersonalInfo,JSON.stringify(Y))}),Ct(()=>{localStorage.setItem(Ht.Lists,JSON.stringify(Qt))}),window.addEventListener("resize",()=>{kt(xt,window.matchMedia("(width < 48rem)").matches),kt(Wt,window.matchMedia("(width < 1280px)").matches),mt(E,Math.min(Math.min(window.innerWidth/3,640),window.innerHeight/3),!0)}),Kt(({to:i})=>{i&&i.url.origin===window.location.origin&&(dt.setParametersFromURL(i.url),dt.update())});let E=Ft(ra(Math.min(Math.min(window.innerWidth/3,640),window.innerHeight/3))),it=pt(()=>{let i=Math.ceil(document.body.clientWidth/(s(E)/3));return i%2!=0&&(i-=1),i}),B=pt(()=>Array.apply(null,Array(s(it)/2)).map(()=>{})),x=pt(()=>s(E)/2);function z(i){let d=i.clientHeight<s(x)/2?1:-1;setInterval(()=>{i.style.height=`${i.clientHeight+d*(.5+Math.random()*s(E)/200)}px`,i.clientHeight<=s(x)/10?d=1:i.clientHeight>=s(x)&&(d=-1)},5)}function N(i,d,g){const S=Math.random(),y=i%2===0?.5:2,w=Math.pow(S,y);return d+w*(g-d)}var X=$t(),J=et(X);ia(J,()=>t.data.alko,i=>{var d=ae(),g=r(d);yt(g,21,()=>s(B),Pt,(w,Q,V)=>{var $=Xa();Ot($,H=>z?.(H)),A((H,W)=>{ct($,H),m($,1,W)},[()=>`min-width: ${s(E)/3}px; height: ${N(V,s(x)/10,s(x))}px`,()=>v(p("block",["bg-brand-1","bg-brand-2","bg-brand-3"][V*2%3]))]),u(w,$)}),e(g);var S=a(g,2),y=a(S,2);yt(y,21,()=>s(B),Pt,(w,Q,V)=>{var $=te();Ot($,H=>z?.(H)),A((H,W)=>{ct($,H),m($,1,W)},[()=>`min-width: ${s(E)/3}px; height: ${N(V,s(x)/10,s(x))}px`,()=>v(p("block",["bg-brand-3","bg-brand-1","bg-brand-2"][V*2%3]))]),u(w,$)}),e(y),rt(2),e(d),A(()=>{ct(g,`transform: translate(calc(calc(100% + min(${s(E)/6}px, 107px)) * -1), 0%)`),wt(S,"src",ya),ct(S,`clip-path: inset(0 33.333% 0 33.333%); height: ${s(E)}px; `),ct(y,`transform: translate(min(${s(E)/6}px, 107px), 0%)`)}),na(2,d,()=>la,()=>({delay:500})),u(i,d)},(i,d)=>{var g=Wa(),S=r(g);M(S,c=>{});var y=a(S,2),w=r(y),Q=r(w);rt(2),e(w);var V=a(w,2);{var $=c=>{var h=Ga(),O=r(h),R=r(O);D(R,{name:"search"}),e(O);var C=a(O,2);Ut(C),e(h),A((_,L,K)=>{m(h,1,_),m(O,1,L),m(C,1,K)},[()=>v(p("flex w-full flex-row","rounded border border-gray-300")),()=>v(p(f.button(),"aspect-square border-0 bg-white text-black","p-2 text-xl","rounded-e-none border-e-0")),()=>v(p(f.input(),"text-md w-full gap-2 rounded-s-none border-0 border-s hover:border-gray-300"))]),qt(C,P,_=>kt(Tt,_)),u(c,h)};M(V,c=>{It.route.id!=="/tuotteet/[...id]"&&c($)})}var H=a(V,2),W=r(H);{var ht=c=>{va(c,{get kaljakori(){return s(d).kaljakori}})};M(W,c=>{o()&&c(ht)})}var l=a(W,2),k=r(l),F=r(k);{var Z=c=>{var h=Qa();u(c,h)};M(F,c=>{o()||c(Z)})}var nt=a(F);D(nt,{name:"list_ul"}),e(k),e(l);var T=a(l,2);Ka(T,{get alko(){return s(d)}}),e(H),e(y);var q=a(y,2),I=r(q);sa(I,()=>t.children??St),e(q),e(g),A(c=>{wt(Q,"src",wa),m(k,1,c)},[()=>v(p(f.button(),"p-2 text-xl"))]),u(i,g)},(i,d)=>{var g=Ya(),S=r(g),y=r(S),w=r(y);e(y);var Q=a(y,2);Q.__click=[Za],e(S),e(g),A(()=>vt(w,`Virhe datan lataamisessa: ${s(d).message??""}`)),u(i,g)}),u(n,X),Vt(),j()}Et(["click"]);export{_e as component,he as universal};
