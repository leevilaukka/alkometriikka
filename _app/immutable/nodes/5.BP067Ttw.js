import{r as qa,e as Oa}from"../chunks/D5gDvuDJ.js";import"../chunks/B1IEMRCk.js";import{j as Fa,a as ga,i as b,ab as Ga,v as P,ac as Ya,m as r,o as l,q as t,n as fa,a7 as _,d as p,e as xa,f as T,b as ea,g as n,aa as V,ae as ma}from"../chunks/Blx9tMFz.js";import{P as Ha,a as Ja}from"../chunks/Bk0acZ1W.js";import{i as X,b as Ka}from"../chunks/D90skVT9.js";import{e as Z,a as $,s as aa,f as Qa}from"../chunks/2tuZ5JlQ.js";import{A as a,I as D,w as Ra,D as Ua,g as L,t as A,h as E,i as z,x as Wa}from"../chunks/Dz1ThuZh.js";import{g as Xa,v as S,f as _a}from"../chunks/LXmW7SWr.js";import{f as Za,P as pa,B as $a,A as ae,a as ee}from"../chunks/Bd-HB-3y.js";import{a as te,g as re}from"../chunks/o1WFV9BS.js";import{p as le}from"../chunks/jgrIKtcs.js";async function oe({parent:w,params:e}){const B=await w(),h=await B.alko,k=e.id?.split("/")[0];return k||qa(300,"/"),h.kaljakori.findById(k)||Oa(404,{message:"Tuotetta ei löytynyt"}),B}const Ne=Object.freeze(Object.defineProperty({__proto__:null,load:oe},Symbol.toStringTag,{value:"Module"}));var ne=(w,e)=>e(),se=(w,e)=>e().showModal(),ie=b("<button><span>Lisää listaan</span> <!></button>"),de=b('<h2 class="text-xl">Valitse lista</h2> <!>',1),ce=b("<p> </p>"),ve=b("<p> </p>"),ue=b('<a class="flex w-48 shrink-0 flex-col gap-3 rounded-lg border border-gray-300 p-4"><div class="flex flex-col gap-2 h-[calc(3_*_2.5rem)] md:h-[calc(3_*_2.75rem)]"><h2 class="line-clamp-3 text-xl font-bold md:text-2xl"> </h2> <span> </span></div> <div class="flex aspect-square w-full shrink-0 p-2 md:max-w-fit"><!></div> <div class="flex flex-col gap-2"><p class="text-3xl font-bold drop-shadow-lg"> </p> <span class="text-sm text-gray-500"> </span></div></a>'),fe=b('<div class="flex items-center justify-between"><h2 class="text-2xl font-bold">Samankaltaisia tuotteita</h2> <a><span>Lisää samankaltaisia</span> <!></a></div> <div class="flex max-w-full flex-row flex-nowrap gap-3 overflow-x-auto"></div>',1),me=b('<div><div class="flex w-full items-center gap-4"><button><!> <span></span></button></div> <div class="grid w-full grid-cols-1 md:grid-cols-[auto_1fr]"><div class="flex aspect-square h-96 w-full max-w-full p-6 md:w-fit"><!></div> <div class="flex w-full flex-col justify-between gap-3"><div class="flex flex-col gap-2"><h2 class="text-2xl font-bold md:text-3xl"> </h2> <span> </span> <p class="w-fit rounded bg-gray-200 px-1"> </p> <div class="flex w-full flex-row gap-2 md:flex-row"><!></div></div> <div class="flex flex-col items-end gap-1"><p class="text-4xl font-bold"> </p> <span class="text-sm text-gray-500"> </span></div></div></div> <div class="flex w-full items-center gap-4 md:justify-end"><!> <a target="_blank" rel="noopener noreferrer"><span>Alkon tuotesivu</span> <!></a></div> <div class="flex w-full flex-col gap-2 rounded border border-gray-300 bg-gray-200 p-4"><div class="flex flex-col items-start gap-0.5 md:flex-row md:gap-3"><div class="flex flex-col gap-0.5 md:gap-1"><h2 class="text-lg font-bold">Perustiedot</h2> <!></div></div> <div class="flex flex-col gap-0.5 md:gap-1"><h2 class="text-lg font-bold">Laskennalliset tiedot</h2> <!></div></div> <!></div>');function _e(w,e){ga(e,!0);function B(){window.history.length>1?window.history.back():re("/")}let h,k=Za(e.product,e.kaljakori,new Set([a.Type,a.SubType,a.BeerType,a.Price,a.BottleSize,a.Sugar,a.PackagingType,a.AlcoholGramsPerEuro,a.GrapeVarieties,a.Description]),20);te(()=>{h?.scrollIntoView({behavior:"smooth"})});function j(s){function u(i){i.deltaY!=0&&(i.preventDefault(),s.scrollBy({left:i.deltaY}))}return s.addEventListener("wheel",u),{destroy(){s.removeEventListener("wheel",u)}}}var g=me();Ga(s=>{P(u=>Ya.title=u,[()=>Xa(`${e.product[a.Name]}`)])});var N=r(g),C=r(N);C.__click=[ne,B];var ta=r(C);D(ta,{name:window.history.length>1?"arrow_back":"home",class:"inline-block"});var ha=l(ta,2);ha.textContent=window.history.length>1?"Takaisin":"Etusivulle",t(C),t(N);var M=l(N,2),q=r(M),ba=r(q);pa(ba,{get number(){return e.product[a.Number]},get name(){return e.product[a.Name]},transform:"medium",get alt(){return e.product[a.Name]}}),t(q);var ra=l(q,2),O=r(ra),F=r(O),wa=r(F,!0);t(F);var G=l(F,2),ka=r(G);t(G);var Y=l(G,2),ya=r(Y,!0);t(Y);var la=l(Y,2),Pa=r(la);$a(Pa,{get item(){return e.product}}),t(la),t(O);var oa=l(O,2),H=r(oa),Sa=r(H);t(H);var na=l(H,2),Ba=r(na);t(na),t(oa),t(ra),t(M);var J=l(M,2),sa=r(J);Ha(sa,{class:"gap-4 p-4",renderButton:(i,o=fa)=>{var d=ie();d.__click=[se,o];var f=l(r(d),2);D(f,{name:"plus"}),t(d),P(v=>z(d,1,v),[()=>L(A(E.button({type:"positive",size:"md"})))]),p(i,d)},renderContent:(i,o=fa)=>{var d=de(),f=l(T(d),2);ae(f,{action:v=>{ee(v,e.product[a.Number]),o().close()}}),p(i,d)},$$slots:{renderButton:!0,renderContent:!0}});var I=l(sa,2),ja=l(r(I),2);D(ja,{name:"link_external",class:"inline-block"}),t(I),t(J);var K=l(J,2),Q=r(K),ia=r(Q),Na=l(r(ia),2);Z(Na,17,()=>Object.entries(Ra),$,(s,u)=>{var i=V(()=>ma(n(u),2));let o=()=>n(i)[1];const d=V(()=>S(e.product[o()]).length>0);var f=ea(),v=T(f);{var c=m=>{var x=ce(),y=r(x,!0);t(x),P(R=>_(y,R),[()=>S(e.product[o()],o())]),p(m,x)};X(v,m=>{n(d)&&!Wa.has(o())&&m(c)})}p(s,f)}),t(ia),t(Q);var da=l(Q,2),La=l(r(da),2);Z(La,17,()=>Object.entries(Ua),$,(s,u)=>{var i=V(()=>ma(n(u),2));let o=()=>n(i)[1];var d=ea(),f=T(d);{var v=c=>{var m=ve(),x=r(m,!0);t(m),P(y=>_(x,y),[()=>S(e.product[o()],o())]),p(c,m)};X(f,c=>{e.product[o()]!==null&&e.product[o()]!==void 0&&c(v)})}p(s,d)}),t(da),t(K);var Aa=l(K,2);{var za=s=>{var u=fe(),i=T(u),o=l(r(i),2),d=l(r(o),2);D(d,{name:"arrow_right"}),t(o),t(i);var f=l(i,2);Z(f,21,()=>k,$,(v,c)=>{var m=ue(),x=r(m),y=r(x),R=r(y,!0);t(y);var ca=l(y,2),Ta=r(ca,!0);t(ca),t(x);var U=l(x,2),Va=r(U);pa(Va,{get number(){return n(c)[a.Number]},get name(){return n(c)[a.Name]},get alt(){return n(c)[a.Name]},class:"block aspect-square h-full w-full object-contain"}),t(U);var va=l(U,2),W=r(va),Ca=r(W);t(W);var ua=l(W,2),Ia=r(ua);t(ua),t(va),t(m),P((Da,Ea,Ma)=>{aa(m,"href",`/tuotteet/${n(c)[a.Number]}`),_(R,n(c)[a.Name]),_(Ta,Da),_(Ca,`${Ea??""} €`),_(Ia,`${Ma??""} (${n(c)[a.PricePerLiter]??""} €/L)`)},[()=>_a(n(c)[a.AlcoholPercentage],a.AlcoholPercentage),()=>n(c)[a.Price].toFixed(2),()=>_a(n(c)[a.BottleSize],a.BottleSize)]),p(v,m)}),t(f),Qa(f,v=>j?.(v)),P(v=>{z(o,1,v),aa(o,"href",`/vastaavat/${e.product[a.Number]}`)},[()=>L(A(E.button({size:"md"})))]),p(s,u)};X(Aa,s=>{k.length&&s(za)})}t(g),Ka(g,s=>h=s,()=>h),P((s,u,i,o,d,f,v,c)=>{z(g,1,s),z(C,1,u),_(wa,e.product[a.Name]),_(ka,`${i??""} | ${o??""} | ${d??""}
					${f??""}`),_(ya,e.product[a.Availability]),_(Sa,`${v??""} €`),_(Ba,`(${e.product[a.PricePerLiter]??""} €/L)`),aa(I,"href",`https://www.alko.fi/tuotteet/${e.product[a.Number]}`),z(I,1,c)},[()=>L(A("mx-auto flex w-full max-w-[120ch] flex-col flex-nowrap gap-6 p-6")),()=>L(A(E.button({size:"md"}))),()=>S(e.product[a.Manufacturer],a.Manufacturer),()=>S(e.product[a.BottleSize],a.BottleSize),()=>S(e.product[a.AlcoholPercentage],a.AlcoholPercentage),()=>e.product[a.Vintage]!==""?`| ${S(e.product[a.Vintage],a.Vintage)}`:"",()=>e.product[a.Price].toFixed(2),()=>L(A(E.button({size:"md"})))]),p(w,g),xa()}Fa(["click"]);var pe=b('<div class="grid h-full w-full place-content-center"><div class="flex flex-col items-center gap-3"><span class="block h-16 w-16 animate-spin rounded-full border-[0.5rem] border-red-600 border-b-transparent"></span> <p>Ladataan...</p></div></div>');function Le(w,e){ga(e,!0);let B=V(()=>le.params.id?.split("/")[0]);var h=ea(),k=T(h);Ja(k,()=>e.data.alko,j=>{var g=pe();p(j,g)},(j,g)=>{const N=V(()=>n(g).kaljakori.findById(n(B)));_e(j,{get product(){return n(N)},get kaljakori(){return n(g).kaljakori}})}),p(w,h),xa()}export{Le as component,Ne as universal};
