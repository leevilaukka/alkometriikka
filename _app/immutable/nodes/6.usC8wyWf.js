import{r as Pt,e as St}from"../chunks/D5gDvuDJ.js";import{s as jt,a as Bt}from"../chunks/B1IEMRCk.js";import{j as Tt,a as lt,S as At,s as W,k as et,i as p,m as e,o,q as r,g as u,n as q,aa as Y,v as M,d as n,e as it,a7 as m,b as nt,f as R,w as Lt}from"../chunks/Blx9tMFz.js";import{P as Mt,a as It}from"../chunks/Bk0acZ1W.js";import{p as Et}from"../chunks/jgrIKtcs.js";import{i as rt,b as Vt}from"../chunks/D90skVT9.js";import{A as a,I as G,g as O,t as D,h as X,i as F,j as zt}from"../chunks/Dz1ThuZh.js";import{t as ot,f as st}from"../chunks/D9pBzadF.js";import{f as Ct,P as Nt,B as qt,A as Gt,a as Ot}from"../chunks/Bd-HB-3y.js";import{S as Dt,P as Ft}from"../chunks/By9aO5cc.js";import{g as Ht}from"../chunks/o1WFV9BS.js";import{v as H}from"../chunks/LXmW7SWr.js";async function Rt({parent:d,params:t}){const _=await d(),g=await _.alko,x=t.id?.split("/")[0];return x||Pt(300,"/"),g.kaljakori.findById(x)||St(404,{message:"Tuotetta ei löytynyt"}),_}const ma=Object.freeze(Object.defineProperty({__proto__:null,load:Rt},Symbol.toStringTag,{value:"Module"}));var Jt=(d,t)=>t(),Kt=(d,t)=>{u(t)?.scroll({index:0,smoothScroll:!1})},Qt=p("<button><!> <span> </span></button>"),Ut=p('<div class="flex w-full flex-col gap-3"><div class="grid w-full grid-cols-1 md:grid-cols-[auto_1fr]"><div class="flex aspect-square h-56 w-full max-w-full p-6 md:w-fit"><!></div> <div class="flex w-full flex-col justify-between gap-3"><div class="flex flex-col gap-2"><h2 class="text-lg font-bold md:text-xl">Samankaltaisia tuotteita kuin:</h2> <h1 class="text-2xl font-bold md:text-3xl"> </h1> <span> </span> <p class="w-fit rounded bg-gray-200 px-1"> </p> <div class="flex w-full flex-row gap-2 md:flex-row"><!></div></div> <div class="flex flex-col items-end gap-1"><p class="text-4xl font-bold"> </p> <span class="text-sm text-gray-500"> </span></div></div></div> <div class="grid grid-cols-[1fr_auto_1fr] items-center gap-3"><hr class="border-gray-300"/> <span class="text-sm text-gray-500">Vastaavin ensin</span> <hr class="border-gray-300"/></div></div>'),Wt=(d,t)=>t().showModal(),Xt=p("<button><span>Lisää listaan</span> <!></button>"),Yt=p('<h2 class="text-xl">Valitse lista</h2> <!>',1),Zt=p('<div class="absolute top-0 left-0 flex flex-nowrap items-center gap-0.5 rounded-br bg-gray-100 px-1.5 py-0.5 text-sm text-gray-500"><!> <span> </span></div> <!>',1),$t=p('<div><div class="flex w-full items-center justify-between gap-4"><button><!> <span></span></button> <!></div> <div class="flex max-h-full flex-auto flex-col overflow-hidden"><!></div></div>');function ta(d,t){lt(t,!0);const _=()=>Bt(zt,"$isMobile",g),[g,x]=jt();let v=et(null),c=et(!1),J=Ct(t.product,t.kaljakori,new Set([a.Type,a.SubType,a.BeerType,a.Price,a.BottleSize,a.Sugar,a.PackagingType,a.AlcoholGramsPerEuro,a.GrapeVarieties,a.Description]),t.kaljakori.data.length);function dt(){window.history.length>1?window.history.back():Ht("/")}At(()=>{const i=document.getElementById("virtual-list-viewport");i?.addEventListener("scroll",()=>{i.scrollTop>0?W(c,!0):W(c,!1)})});var I=$t(),K=e(I),P=e(K);P.__click=[Jt,dt];var Z=e(P);G(Z,{name:window.history.length>1?"arrow_back":"home",class:"inline-block"});var ct=o(Z,2);ct.textContent=window.history.length>1?"Takaisin":"Etusivulle",r(P);var ut=o(P,2);{var vt=i=>{var s=Qt();s.__click=[Kt,v];var b=e(s);G(b,{name:"arrow_to_top"});var S=o(b,2),E=e(S,!0);r(S),r(s),M(V=>{F(s,1,V),m(E,_()?"Alkuun":"Hyppää alkuun")},[()=>O(D(X.button({size:"md"})))]),ot(1,s,()=>st,()=>({duration:200})),ot(2,s,()=>st,()=>({duration:200})),n(i,s)};rt(ut,i=>{u(c)&&i(vt)})}r(K);var $=o(K,2),ft=e($);{const i=(b,S=q,E=q)=>{var V=nt(),mt=R(V);{var pt=w=>{var z=Ut(),C=e(z),h=e(C),j=e(h);Nt(j,{get number(){return t.product[a.Number]},get name(){return t.product[a.Name]},transform:"medium",get alt(){return t.product[a.Name]}}),r(h);var B=o(h,2),k=e(B),T=o(e(k),2),Q=e(T,!0);r(T);var N=o(T,2),tt=e(N);r(N);var f=o(N,2),A=e(f,!0);r(f);var l=o(f,2),L=e(l);qt(L,{get item(){return t.product}}),r(l),r(k);var y=o(k,2),U=e(y),gt=e(U);r(U);var at=o(U,2),xt=e(at);r(at),r(y),r(B),r(C),Lt(2),r(z),M((bt,wt,ht,kt,yt)=>{m(Q,t.product[a.Name]),m(tt,`${bt??""} | ${wt??""} | ${ht??""}
                                        ${kt??""}`),m(A,t.product[a.Availability]),m(gt,`${yt??""} €`),m(xt,`(${t.product[a.PricePerLiter]??""} €/L)`)},[()=>H(t.product[a.Manufacturer],a.Manufacturer),()=>H(t.product[a.BottleSize],a.BottleSize),()=>H(t.product[a.AlcoholPercentage],a.AlcoholPercentage),()=>t.product[a.Vintage]!==""?`| ${H(t.product[a.Vintage],a.Vintage)}`:"",()=>t.product[a.Price].toFixed(2)]),n(w,z)},_t=w=>{Ft(w,{get product(){return S()},get kaljakori(){return t.kaljakori},renderExtras:C=>{var h=Zt(),j=R(h),B=e(j);G(B,{name:"hashtag"});var k=o(B,2),T=e(k,!0);r(k),r(j);var Q=o(j,2);Mt(Q,{class:"gap-4 p-4",renderButton:(f,A=q)=>{var l=Xt();l.__click=[Wt,A];var L=o(e(l),2);G(L,{name:"plus"}),r(l),M(y=>F(l,1,y),[()=>O(D(X.button({type:"positive"}),"ml-auto"))]),n(f,l)},renderContent:(f,A=q)=>{var l=Yt(),L=o(R(l),2);Gt(L,{action:y=>{Ot(y,S()[a.Number]),A().close()}}),n(f,l)},$$slots:{renderButton:!0,renderContent:!0}}),M(()=>m(T,`${E()}`)),n(C,h)},$$slots:{renderExtras:!0}})};rt(mt,w=>{E()===0?w(pt):w(_t,!1)})}n(b,V)};let s=Y(()=>[null,...J]);Vt(Dt(ft,{get items(){return u(s)},itemsClass:"relative flex flex-col gap-3",renderItem:i,$$slots:{renderItem:!0}}),b=>W(v,b,!0),()=>u(v))}r($),r(I),M((i,s)=>{F(I,1,i),F(P,1,s)},[()=>O(D("mx-auto flex w-full max-w-[120ch] flex-auto flex-col flex-nowrap p-4 gap-4 md:p-6")),()=>O(D(X.button({size:"md"})))]),n(d,I),it(),x()}Tt(["click"]);var aa=p('<div class="grid h-full w-full place-content-center"><div class="flex flex-col items-center gap-3"><span class="block h-16 w-16 animate-spin rounded-full border-[0.5rem] border-red-600 border-b-transparent"></span> <p>Ladataan...</p></div></div>');function pa(d,t){lt(t,!0);let _=Y(()=>Et.params.id?.split("/")[0]);var g=nt(),x=R(g);It(x,()=>t.data.alko,v=>{var c=aa();n(v,c)},(v,c)=>{const J=Y(()=>u(c).kaljakori.findById(u(_)));ta(v,{get product(){return u(J)},get kaljakori(){return u(c).kaljakori}})}),n(d,g),it()}export{pa as component,ma as universal};
