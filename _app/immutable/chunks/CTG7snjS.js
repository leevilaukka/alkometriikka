import{s as Ka,a as Za}from"./B1IEMRCk.js";import{j as to,a as eo,n as Ke,s as ye,k as ge,g as ct,e as ro,i as Et,m as yt,o as gt,q as wt,v as Gt,d as Pt,w as no}from"./Blx9tMFz.js";import{i as we,b as ao}from"./D90skVT9.js";import{A as Ze,I as tr,g as qt,t as Qt,h as $e,i as Xt,j as oo}from"./Dz1ThuZh.js";import{P as io}from"./Bk0acZ1W.js";import{g as er}from"./o1WFV9BS.js";var or=o=>{throw TypeError(o)},ir=(o,l,h)=>l.has(o)||or("Cannot "+h),so=(o,l,h)=>(ir(o,l,"read from private field"),h?h.call(o):l.get(o)),co=(o,l,h)=>l.has(o)?or("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(o):l.set(o,h),uo=(o,l,h,f)=>(ir(o,l,"write to private field"),l.set(o,h),h);const Kt=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Zt=Kt.map(([o])=>o),lo=Zt.filter((o,l)=>Kt[l][1]==="L"),fo=Zt.filter((o,l)=>Kt[l][1]==="M");function Ce(o){switch(o){case"Linear-Codes":return lo.reduce((l,h)=>l|Ce(h),0);case"Matrix-Codes":return fo.reduce((l,h)=>l|Ce(h),0);case"Any":return(1<<Kt.length)-1;case"None":return 0;default:return 1<<Zt.indexOf(o)}}function ho(o){if(o===0)return"None";const l=31-Math.clz32(o);return Zt[l]}function po(o){return o.reduce((l,h)=>l|Ce(h),0)}const vo=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function mo(o){return vo.indexOf(o)}const rr=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function yo(o){return o==="UnicodeBig"?rr.indexOf("UTF16BE"):rr.indexOf(o)}const go=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function wo(o){return go[o]}const $o=["Ignore","Read","Require"];function bo(o){return $o.indexOf(o)}const Co=["Plain","ECI","HRI","Hex","Escaped"];function _o(o){return Co.indexOf(o)}const Jt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function nr(o){return{...o,formats:po(o.formats),binarizer:mo(o.binarizer),eanAddOnSymbol:bo(o.eanAddOnSymbol),textMode:_o(o.textMode),characterSet:yo(o.characterSet)}}function To(o){return{...o,format:ho(o.format),contentType:wo(o.contentType),eccLevel:o.ecLevel}}const xo={locateFile:(o,l)=>{const h=o.match(/_(.+?)\.wasm$/);return h?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.2/dist/${h[1]}/${o}`:l+o}},be=new WeakMap;function Po(o,l){return Object.is(o,l)||Object.keys(o).length===Object.keys(l).length&&Object.keys(o).every(h=>Object.hasOwn(l,h)&&o[h]===l[h])}function sr(o,{overrides:l,equalityFn:h=Po,fireImmediately:f=!1}={}){var P;const[E,I]=(P=be.get(o))!=null?P:[xo],D=l??E;let x;if(f){if(I&&(x=h(E,D)))return I;const j=o({...D});return be.set(o,[D,j]),j}(x??h(E,D))||be.set(o,[D])}async function Eo(o,l,h=Jt){const f={...Jt,...h},P=await sr(o,{fireImmediately:!0});let E,I;if("width"in l&&"height"in l&&"data"in l){const{data:x,data:{byteLength:j},width:W,height:N}=l;I=P._malloc(j),P.HEAPU8.set(x,I),E=P.readBarcodesFromPixmap(I,W,N,nr(f))}else{let x,j;if("buffer"in l)[x,j]=[l.byteLength,l];else if("byteLength"in l)[x,j]=[l.byteLength,new Uint8Array(l)];else if("size"in l)[x,j]=[l.size,new Uint8Array(await l.arrayBuffer())];else throw new TypeError("Invalid input type");I=P._malloc(x),P.HEAPU8.set(j,I),E=P.readBarcodesFromImage(I,x,nr(f))}P._free(I);const D=[];for(let x=0;x<E.size();++x)D.push(To(E.get(x)));return D}({...Jt,formats:[...Jt.formats]});var cr=async function(o={}){var l,h,f=o,P,E,I=new Promise((e,t)=>{P=e,E=t}),D=typeof window=="object",x=typeof Bun<"u",j=typeof WorkerGlobalScope<"u";typeof process=="object"&&!((h=process.versions)===null||h===void 0)&&h.node&&process.type!="renderer";var W="./this.program",N,X="";function ot(e){return f.locateFile?f.locateFile(e,X):X+e}var ut,it;if(D||j||x){try{X=new URL(".",N).href}catch{}j&&(it=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ut=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var $t=(()=>{}).bind(console),G=(()=>{}).bind(console),lt,bt,R=!1,A,T,st,B,H,b,ft,q;function Ct(){var e=bt.buffer;A=new Int8Array(e),st=new Int16Array(e),f.HEAPU8=T=new Uint8Array(e),B=new Uint16Array(e),H=new Int32Array(e),b=new Uint32Array(e),ft=new Float32Array(e),q=new Float64Array(e)}function jt(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)Tr(f.preRun.shift());Te(Pe)}function te(){O.ya()}function ee(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)_r(f.postRun.shift());Te(xe)}var Y=0,U=null;function K(e){var t;Y++,(t=f.monitorRunDependencies)===null||t===void 0||t.call(f,Y)}function Z(e){var t;if(Y--,(t=f.monitorRunDependencies)===null||t===void 0||t.call(f,Y),Y==0&&U){var r=U;U=null,r()}}function dt(e){var t;(t=f.onAbort)===null||t===void 0||t.call(f,e),e="Aborted("+e+")",G(e),R=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw E(r),r}var _t;function tt(){return ot("zxing_reader.wasm")}function re(e){if(e==_t&&lt)return new Uint8Array(lt);if(it)return it(e);throw"both async and sync fetching of the wasm failed"}async function gr(e){if(!lt)try{var t=await ut(e);return new Uint8Array(t)}catch{}return re(e)}async function wr(e,t){try{var r=await gr(e),n=await WebAssembly.instantiate(r,t);return n}catch(a){G(`failed to asynchronously prepare wasm: ${a}`),dt(a)}}async function $r(e,t,r){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(t,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(n,r);return a}catch(i){G(`wasm streaming compile failed: ${i}`),G("falling back to ArrayBuffer instantiation")}return wr(t,r)}function br(){return{a:aa}}async function Cr(){function e(i,c){return O=i.exports,bt=O.xa,Ct(),Fe=O.Ba,Z(),O}K();function t(i){return e(i.instance)}var r=br();if(f.instantiateWasm)return new Promise((i,c)=>{f.instantiateWasm(r,(s,u)=>{i(e(s))})});_t!=null||(_t=tt());try{var n=await $r(lt,_t,r),a=t(n);return a}catch(i){return E(i),Promise.reject(i)}}var Te=e=>{for(;e.length>0;)e.shift()(f)},xe=[],_r=e=>xe.push(e),Pe=[],Tr=e=>Pe.push(e),y=e=>ca(e),g=()=>ua(),Mt=[],Dt=0,xr=e=>{var t=new ne(e);return t.get_caught()||(t.set_caught(!0),Dt--),t.set_rethrown(!1),Mt.push(t),fa(e),ia(e)},et=0,Pr=()=>{m(0,0);var e=Mt.pop();la(e.excPtr),et=0};class ne{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){b[this.ptr+4>>2]=t}get_type(){return b[this.ptr+4>>2]}set_destructor(t){b[this.ptr+8>>2]=t}get_destructor(){return b[this.ptr+8>>2]}set_caught(t){t=t?1:0,A[this.ptr+12]=t}get_caught(){return A[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,A[this.ptr+13]=t}get_rethrown(){return A[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){b[this.ptr+16>>2]=t}get_adjusted_ptr(){return b[this.ptr+16>>2]}}var kt=e=>sa(e),ae=e=>{var t=et;if(!t)return kt(0),0;var r=new ne(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return kt(0),t;for(var a of e){if(a===0||a===n)break;var i=r.ptr+16;if(da(a,n,i))return kt(a),t}return kt(n),t},Er=()=>ae([]),Or=e=>ae([e]),Sr=(e,t)=>ae([e,t]),Ar=()=>{var e=Mt.pop();e||dt("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Mt.push(e),e.set_rethrown(!0),e.set_caught(!1),Dt++),et=t,et},Ir=(e,t,r)=>{var n=new ne(e);throw n.init(t,r),et=e,Dt++,et},jr=()=>Dt,Mr=e=>{throw et||(et=e),et},Dr=()=>dt(""),Ft={},oe=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Ot(e){return this.fromWireType(b[e>>2])}var Tt={},ht={},Rt={},kr=class extends Error{constructor(e){super(e),this.name="InternalError"}},Bt=e=>{throw new kr(e)},pt=(e,t,r)=>{e.forEach(s=>Rt[s]=t);function n(s){var u=r(s);u.length!==e.length&&Bt("Mismatched type converter count");for(var d=0;d<e.length;++d)J(e[d],u[d])}var a=new Array(t.length),i=[],c=0;t.forEach((s,u)=>{ht.hasOwnProperty(s)?a[u]=ht[s]:(i.push(s),Tt.hasOwnProperty(s)||(Tt[s]=[]),Tt[s].push(()=>{a[u]=ht[s],++c,c===i.length&&n(a)}))}),i.length===0&&n(a)},Fr=e=>{var t=Ft[e];delete Ft[e];var r=t.rawConstructor,n=t.rawDestructor,a=t.fields,i=a.map(c=>c.getterReturnType).concat(a.map(c=>c.setterArgumentType));pt([e],i,c=>{var s={};return a.forEach((u,d)=>{var p=u.fieldName,v=c[d],$=c[d].optional,C=u.getter,S=u.getterContext,k=c[d+a.length],M=u.setter,F=u.setterContext;s[p]={read:at=>v.fromWireType(C(S,at)),write:(at,V)=>{var z=[];M(F,at,k.toWireType(z,V)),oe(z)},optional:$}}),[{name:t.name,fromWireType:u=>{var d={};for(var p in s)d[p]=s[p].read(u);return n(u),d},toWireType:(u,d)=>{for(var p in s)if(!(p in d)&&!s[p].optional)throw new TypeError(`Missing field: "${p}"`);var v=r();for(p in s)s[p].write(v,d[p]);return u!==null&&u.push(n,v),v},argPackAdvance:rt,readValueFromPointer:Ot,destructorFunction:n}]})},Rr=(e,t,r,n,a)=>{},Br=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Ee=e},Ee,L=e=>{for(var t="",r=e;T[r];)t+=Ee[T[r++]];return t},St=class extends Error{constructor(e){super(e),this.name="BindingError"}},_=e=>{throw new St(e)};function Lr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n=t.name;if(e||_(`type "${n}" must have a positive integer typeid pointer`),ht.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;_(`Cannot register type '${n}' twice`)}if(ht[e]=t,delete Rt[e],Tt.hasOwnProperty(e)){var a=Tt[e];delete Tt[e],a.forEach(i=>i())}}function J(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Lr(e,t,r)}var rt=8,Wr=(e,t,r,n)=>{t=L(t),J(e,{name:t,fromWireType:function(a){return!!a},toWireType:function(a,i){return i?r:n},argPackAdvance:rt,readValueFromPointer:function(a){return this.fromWireType(T[a])},destructorFunction:null})},Ur=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),ie=e=>{function t(r){return r.$$.ptrType.registeredClass.name}_(t(e)+" instance already deleted")},se=!1,Oe=e=>{},Vr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Se=e=>{e.count.value-=1;var t=e.count.value===0;t&&Vr(e)},At=e=>typeof FinalizationRegistry>"u"?(At=t=>t,e):(se=new FinalizationRegistry(t=>{Se(t.$$)}),At=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var a={$$:r};se.register(t,a,t)}return t},Oe=t=>se.unregister(t),At(e)),Hr=()=>{let e=Lt.prototype;Object.assign(e,{isAliasOf(r){if(!(this instanceof Lt)||!(r instanceof Lt))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;r.$$=r.$$;for(var i=r.$$.ptrType.registeredClass,c=r.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;i.baseClass;)c=i.upcast(c),i=i.baseClass;return n===i&&a===c},clone(){if(this.$$.ptr||ie(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=At(Object.create(Object.getPrototypeOf(this),{$$:{value:Ur(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||ie(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_("Object already scheduled for deletion"),Oe(this),Se(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ie(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&_("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function Lt(){}var ce=(e,t)=>Object.defineProperty(t,"name",{value:e}),Ae={},Ie=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(){for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e[t].overloadTable.hasOwnProperty(i.length)||_(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},je=(e,t,r)=>{f.hasOwnProperty(e)?((r===void 0||f[e].overloadTable!==void 0&&f[e].overloadTable[r]!==void 0)&&_(`Cannot register public name '${e}' twice`),Ie(f,e,e),f[e].overloadTable.hasOwnProperty(r)&&_(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),f[e].overloadTable[r]=t):(f[e]=t,f[e].argCount=r)},Nr=48,zr=57,Gr=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Nr&&t<=zr?`_${e}`:e};function qr(e,t,r,n,a,i,c,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=c,this.downcast=s,this.pureVirtualFunctions=[]}var ue=(e,t,r)=>{for(;t!==r;)t.upcast||_(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},le=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e};function Qr(e,t){if(t===null)return this.isReference&&_(`null is not a valid ${this.name}`),0;t.$$||_(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||_(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ue(t.$$.ptr,r,this.registeredClass);return n}function Xr(e,t){var r;if(t===null)return this.isReference&&_(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&_(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||_(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&_(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=ue(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&_("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:_(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var a=t.clone();r=this.rawShare(r,nt.toHandle(()=>a.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:_("Unsupporting sharing policy")}return r}function Yr(e,t){if(t===null)return this.isReference&&_(`null is not a valid ${this.name}`),0;t.$$||_(`Cannot pass "${le(t)}" as a ${this.name}`),t.$$.ptr||_(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&_(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ue(t.$$.ptr,r,this.registeredClass);return n}var Me=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=Me(e,t,r.baseClass);return n===null?null:r.downcast(n)},Jr={},Kr=(e,t)=>{for(t===void 0&&_("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Zr=(e,t)=>(t=Kr(e,t),Jr[t]),Wt=(e,t)=>{(!t.ptrType||!t.ptr)&&Bt("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Bt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},At(Object.create(e,{$$:{value:t,writable:!0}}))};function tn(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Zr(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Wt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Wt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i=this.registeredClass.getActualType(t),c=Ae[i];if(!c)return a.call(this);var s;this.isConst?s=c.constPointerType:s=c.pointerType;var u=Me(t,this.registeredClass,s.registeredClass);return u===null?a.call(this):this.isSmartPointer?Wt(s.registeredClass.instancePrototype,{ptrType:s,ptr:u,smartPtrType:this,smartPtr:e}):Wt(s.registeredClass.instancePrototype,{ptrType:s,ptr:u})}var en=()=>{Object.assign(Ut.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:rt,readValueFromPointer:Ot,fromWireType:tn})};function Ut(e,t,r,n,a,i,c,s,u,d,p){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=c,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=d,this.rawDestructor=p,!a&&t.baseClass===void 0?n?(this.toWireType=Qr,this.destructorFunction=null):(this.toWireType=Yr,this.destructorFunction=null):this.toWireType=Xr}var De=(e,t,r)=>{f.hasOwnProperty(e)||Bt("Replacing nonexistent public symbol"),f[e].overloadTable!==void 0&&r!==void 0?f[e].overloadTable[r]=t:(f[e]=t,f[e].argCount=r)},ke=[],Fe,w=e=>{var t=ke[e];return t||(ke[e]=t=Fe.get(e)),t},rn=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.includes("j"))return dynCallLegacy(e,t,r);var n=w(t),a=n(...r);return a},nn=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return rn(e,t,a,r)}},Q=function(e,t){e=L(e);function r(){if(e.includes("j"))return nn(e,t);var a=w(t);return a}var n=r();return typeof n!="function"&&_(`unknown function pointer with signature ${e}: ${t}`),n};class an extends Error{}var Re=e=>{var t=oa(e),r=L(t);return mt(t),r},Vt=(e,t)=>{var r=[],n={};function a(i){if(!n[i]&&!ht[i]){if(Rt[i]){Rt[i].forEach(a);return}r.push(i),n[i]=!0}}throw t.forEach(a),new an(`${e}: `+r.map(Re).join([", "]))},on=(e,t,r,n,a,i,c,s,u,d,p,v,$)=>{p=L(p),i=Q(a,i),s&&(s=Q(c,s)),d&&(d=Q(u,d)),$=Q(v,$);var C=Gr(p);je(C,function(){Vt(`Cannot construct ${p} due to unbound types`,[n])}),pt([e,t,r],n?[n]:[],S=>{S=S[0];var k,M;n?(k=S.registeredClass,M=k.instancePrototype):M=Lt.prototype;var F=ce(p,function(){if(Object.getPrototypeOf(this)!==at)throw new St(`Use 'new' to construct ${p}`);if(V.constructor_body===void 0)throw new St(`${p} has no accessible constructor`);for(var Ye=arguments.length,Nt=new Array(Ye),zt=0;zt<Ye;zt++)Nt[zt]=arguments[zt];var Je=V.constructor_body[Nt.length];if(Je===void 0)throw new St(`Tried to invoke ctor of ${p} with invalid number of parameters (${Nt.length}) - expected (${Object.keys(V.constructor_body).toString()}) parameters instead!`);return Je.apply(this,Nt)}),at=Object.create(M,{constructor:{value:F}});F.prototype=at;var V=new qr(p,F,at,$,k,i,s,d);if(V.baseClass){var z,Ht;(Ht=(z=V.baseClass).__derivedClasses)!==null&&Ht!==void 0||(z.__derivedClasses=[]),V.baseClass.__derivedClasses.push(V)}var Ja=new Ut(p,V,!0,!1,!1),Qe=new Ut(p+"*",V,!1,!1,!1),Xe=new Ut(p+" const*",V,!1,!0,!1);return Ae[e]={pointerType:Qe,constPointerType:Xe},De(C,F),[Ja,Qe,Xe]})},fe=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(b[t+n*4>>2]);return r};function sn(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function de(e,t,r,n,a,i){var c=t.length;c<2&&_("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=t[1]!==null&&r!==null,u=sn(t),d=t[0].name!=="void",p=c-2,v=new Array(p),$=[],C=[],S=function(){C.length=0;var k;$.length=s?2:1,$[0]=a,s&&(k=t[1].toWireType(C,this),$[1]=k);for(var M=0;M<p;++M)v[M]=t[M+2].toWireType(C,M<0||arguments.length<=M?void 0:arguments[M]),$.push(v[M]);var F=n(...$);function at(V){if(u)oe(C);else for(var z=s?1:2;z<t.length;z++){var Ht=z===1?k:v[z-2];t[z].destructorFunction!==null&&t[z].destructorFunction(Ht)}if(d)return t[0].fromWireType(V)}return at(F)};return ce(e,S)}var cn=(e,t,r,n,a,i)=>{var c=fe(t,r);a=Q(n,a),pt([],[e],s=>{s=s[0];var u=`constructor ${s.name}`;if(s.registeredClass.constructor_body===void 0&&(s.registeredClass.constructor_body=[]),s.registeredClass.constructor_body[t-1]!==void 0)throw new St(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${s.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return s.registeredClass.constructor_body[t-1]=()=>{Vt(`Cannot construct ${s.name} due to unbound types`,c)},pt([],c,d=>(d.splice(1,0,null),s.registeredClass.constructor_body[t-1]=de(u,d,null,a,i),[])),[]})},Be=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:e.slice(0,t)},un=(e,t,r,n,a,i,c,s,u,d)=>{var p=fe(r,n);t=L(t),t=Be(t),i=Q(a,i),pt([],[e],v=>{v=v[0];var $=`${v.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&v.registeredClass.pureVirtualFunctions.push(t);function C(){Vt(`Cannot call ${$} due to unbound types`,p)}var S=v.registeredClass.instancePrototype,k=S[t];return k===void 0||k.overloadTable===void 0&&k.className!==v.name&&k.argCount===r-2?(C.argCount=r-2,C.className=v.name,S[t]=C):(Ie(S,t,$),S[t].overloadTable[r-2]=C),pt([],p,M=>{var F=de($,M,v,i,c);return S[t].overloadTable===void 0?(F.argCount=r-2,S[t]=F):S[t].overloadTable[r-2]=F,[]}),[]})},Le=[],vt=[0,1,,1,null,1,!0,1,!1,1],he=e=>{e>9&&--vt[e+1]===0&&(vt[e]=void 0,Le.push(e))},nt={toValue:e=>(e||_(`Cannot use deleted val. handle = ${e}`),vt[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Le.pop()||vt.length;return vt[t]=e,vt[t+1]=1,t}}}},We={name:"emscripten::val",fromWireType:e=>{var t=nt.toValue(e);return he(e),t},toWireType:(e,t)=>nt.toHandle(t),argPackAdvance:rt,readValueFromPointer:Ot,destructorFunction:null},ln=e=>J(e,We),fn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(ft[r>>2])};case 8:return function(r){return this.fromWireType(q[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},dn=(e,t,r)=>{t=L(t),J(e,{name:t,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:rt,readValueFromPointer:fn(t,r),destructorFunction:null})},hn=(e,t,r,n,a,i,c,s)=>{var u=fe(t,r);e=L(e),e=Be(e),a=Q(n,a),je(e,function(){Vt(`Cannot call ${e} due to unbound types`,u)},t-1),pt([],u,d=>{var p=[d[0],null].concat(d.slice(1));return De(e,de(e,p,null,a,i),t-1),[]})},pn=(e,t,r)=>{switch(t){case 1:return r?n=>A[n]:n=>T[n];case 2:return r?n=>st[n>>1]:n=>B[n>>1];case 4:return r?n=>H[n>>2]:n=>b[n>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},vn=(e,t,r,n,a)=>{t=L(t);const i=n===0;let c=u=>u;if(i){var s=32-8*r;c=u=>u<<s>>>s,a=c(a)}J(e,{name:t,fromWireType:c,toWireType:(u,d)=>d,argPackAdvance:rt,readValueFromPointer:pn(t,r,n!==0),destructorFunction:null})},mn=(e,t,r)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[t];function i(c){var s=b[c>>2],u=b[c+4>>2];return new a(A.buffer,u,s)}r=L(r),J(e,{name:r,fromWireType:i,argPackAdvance:rt,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},yn=Object.assign({optional:!0},We),gn=(e,t)=>{J(e,yn)},wn=(e,t,r,n)=>{if(!(n>0))return 0;for(var a=r,i=r+n-1,c=0;c<e.length;++c){var s=e.charCodeAt(c);if(s>=55296&&s<=57343){var u=e.charCodeAt(++c);s=65536+((s&1023)<<10)|u&1023}if(s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a},xt=(e,t,r)=>wn(e,T,t,r),Ue=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Ve=typeof TextDecoder<"u"?new TextDecoder:void 0,He=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&Ve)return Ve.decode(e.subarray(t,a));for(var i="";t<a;){var c=e[t++];if(!(c&128)){i+=String.fromCharCode(c);continue}var s=e[t++]&63;if((c&224)==192){i+=String.fromCharCode((c&31)<<6|s);continue}var u=e[t++]&63;if((c&240)==224?c=(c&15)<<12|s<<6|u:c=(c&7)<<18|s<<12|u<<6|e[t++]&63,c<65536)i+=String.fromCharCode(c);else{var d=c-65536;i+=String.fromCharCode(55296|d>>10,56320|d&1023)}}return i},$n=(e,t)=>e?He(T,e,t):"",bn=(e,t)=>{t=L(t),J(e,{name:t,fromWireType(r){for(var n=b[r>>2],a=r+4,i,s,c=a,s=0;s<=n;++s){var u=a+s;if(s==n||T[u]==0){var d=u-c,p=$n(c,d);i===void 0?i=p:(i+="\0",i+=p),c=u+1}}return mt(r),i},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,i=typeof n=="string";i||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||_("Cannot pass non-string to std::string"),i?a=Ue(n):a=n.length;var c=qe(4+a+1),s=c+4;return b[c>>2]=a,i?xt(n,s,a+1):T.set(n,s),r!==null&&r.push(mt,c),c},argPackAdvance:rt,readValueFromPointer:Ot,destructorFunction(r){mt(r)}})},Ne=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Cn=(e,t)=>{for(var r=e>>1,n=r+t/2,a=r;!(a>=n)&&B[a];)++a;if(a-r>16&&Ne)return Ne.decode(B.subarray(r,a));for(var i="",c=r;!(c>=n);++c){var s=B[c];if(s==0)break;i+=String.fromCharCode(s)}return i},_n=(e,t,r)=>{if(r!=null||(r=2147483647),r<2)return 0;r-=2;for(var n=t,a=r<e.length*2?r/2:e.length,i=0;i<a;++i){var c=e.charCodeAt(i);st[t>>1]=c,t+=2}return st[t>>1]=0,t-n},Tn=e=>e.length*2,xn=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var a=H[e+r*4>>2];if(a==0)break;if(++r,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|i&1023)}else n+=String.fromCharCode(a)}return n},Pn=(e,t,r)=>{if(r!=null||(r=2147483647),r<4)return 0;for(var n=t,a=n+r-4,i=0;i<e.length;++i){var c=e.charCodeAt(i);if(c>=55296&&c<=57343){var s=e.charCodeAt(++i);c=65536+((c&1023)<<10)|s&1023}if(H[t>>2]=c,t+=4,t+4>a)break}return H[t>>2]=0,t-n},En=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},On=(e,t,r)=>{r=L(r);var n,a,i,c;t===2?(n=Cn,a=_n,c=Tn,i=s=>B[s>>1]):t===4&&(n=xn,a=Pn,c=En,i=s=>b[s>>2]),J(e,{name:r,fromWireType:s=>{for(var u=b[s>>2],d,p=s+4,v=0;v<=u;++v){var $=s+4+v*t;if(v==u||i($)==0){var C=$-p,S=n(p,C);d===void 0?d=S:(d+="\0",d+=S),p=$+t}}return mt(s),d},toWireType:(s,u)=>{typeof u!="string"&&_(`Cannot pass non-string to C++ string type ${r}`);var d=c(u),p=qe(4+d+t);return b[p>>2]=d/t,a(u,p+4,d+t),s!==null&&s.push(mt,p),p},argPackAdvance:rt,readValueFromPointer:Ot,destructorFunction(s){mt(s)}})},Sn=(e,t,r,n,a,i)=>{Ft[e]={name:L(t),rawConstructor:Q(r,n),rawDestructor:Q(a,i),fields:[]}},An=(e,t,r,n,a,i,c,s,u,d)=>{Ft[e].fields.push({fieldName:L(t),getterReturnType:r,getter:Q(n,a),getterContext:i,setterArgumentType:c,setter:Q(s,u),setterContext:d})},In=(e,t)=>{t=L(t),J(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})},pe=[],jn=(e,t,r,n)=>(e=pe[e],t=nt.toValue(t),e(null,t,r,n)),Mn={},Dn=e=>{var t=Mn[e];return t===void 0?L(e):t},ze=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var r=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},kn=e=>e===0?nt.toHandle(ze()):(e=Dn(e),nt.toHandle(ze()[e])),Fn=e=>{var t=pe.length;return pe.push(e),t},Ge=(e,t)=>{var r=ht[e];return r===void 0&&_(`${t} has unknown type ${Re(e)}`),r},Rn=(e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Ge(b[t+n*4>>2],`parameter ${n}`);return r},Bn=(e,t,r)=>{var n=[],a=e.toWireType(n,r);return n.length&&(b[t>>2]=nt.toHandle(n)),a},Ln=Reflect.construct,Wn=(e,t,r)=>{var n=Rn(e,t),a=n.shift();e--;var i=new Array(e),c=(u,d,p,v)=>{for(var $=0,C=0;C<e;++C)i[C]=n[C].readValueFromPointer(v+$),$+=n[C].argPackAdvance;var S=r===1?Ln(d,i):d.apply(u,i);return Bn(a,p,S)},s=`methodCaller<(${n.map(u=>u.name).join(", ")}) => ${a.name}>`;return Fn(ce(s,c))},Un=e=>{e>9&&(vt[e+1]+=1)},Vn=e=>{var t=nt.toValue(e);oe(t),he(e)},Hn=(e,t)=>{e=Ge(e,"_emval_take_value");var r=e.readValueFromPointer(t);return nt.toHandle(r)},Nn=(e,t,r,n)=>{var a=new Date().getFullYear(),i=new Date(a,0,1),c=new Date(a,6,1),s=i.getTimezoneOffset(),u=c.getTimezoneOffset(),d=Math.max(s,u);b[e>>2]=d*60,H[t>>2]=+(s!=u);var p=C=>{var S=C>=0?"-":"+",k=Math.abs(C),M=String(Math.floor(k/60)).padStart(2,"0"),F=String(k%60).padStart(2,"0");return`UTC${S}${M}${F}`},v=p(s),$=p(u);u<s?(xt(v,r,17),xt($,n,17)):(xt(v,n,17),xt($,r,17))},zn=()=>2147483648,Gn=(e,t)=>Math.ceil(e/t)*t,qn=e=>{var t=bt.buffer,r=(e-t.byteLength+65535)/65536|0;try{return bt.grow(r),Ct(),1}catch{}},Qn=e=>{var t=T.length;e>>>=0;var r=zn();if(e>r)return!1;for(var n=1;n<=4;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var i=Math.min(r,Gn(Math.max(e,a),65536)),c=qn(i);if(c)return!0}return!1},ve={},Xn=()=>W||"./this.program",It=()=>{if(!It.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Xn()};for(var r in ve)ve[r]===void 0?delete t[r]:t[r]=ve[r];var n=[];for(var r in t)n.push(`${r}=${t[r]}`);It.strings=n}return It.strings},Yn=(e,t)=>{var r=0,n=0;for(var a of It()){var i=t+r;b[e+n>>2]=i,r+=xt(a,i,1/0)+1,n+=4}return 0},Jn=(e,t)=>{var r=It();b[e>>2]=r.length;var n=0;for(var a of r)n+=Ue(a)+1;return b[t>>2]=n,0},Kn=e=>52;function Zn(e,t,r,n,a){return 70}var ta=[null,[],[]],ea=(e,t)=>{var r=ta[e];t===0||t===10?((e===1?$t:G)(He(r)),r.length=0):r.push(t)},ra=(e,t,r,n)=>{for(var a=0,i=0;i<r;i++){var c=b[t>>2],s=b[t+4>>2];t+=8;for(var u=0;u<s;u++)ea(e,T[c+u]);a+=s}return b[n>>2]=a,0},na=e=>e;Br(),Hr(),en(),f.noExitRuntime&&f.noExitRuntime,f.print&&($t=f.print),f.printErr&&(G=f.printErr),f.wasmBinary&&(lt=f.wasmBinary),f.arguments&&f.arguments,f.thisProgram&&(W=f.thisProgram);var aa={s:xr,w:Pr,a:Er,j:Or,m:Sr,P:Ar,p:Ir,ga:jr,d:Mr,ba:Dr,ua:Fr,aa:Rr,pa:Wr,sa:on,ra:cn,H:un,na:ln,V:dn,W:hn,x:vn,t:mn,ta:gn,oa:bn,Q:On,I:Sn,va:An,qa:In,da:jn,wa:he,D:kn,ma:Wn,X:Un,Y:Vn,U:Hn,ca:Nn,ha:Qn,ea:Yn,fa:Jn,ia:Kn,_:Zn,S:ra,K:Ba,C:Wa,M:ya,R:Ga,q:Da,b:$a,E:Ra,ka:Va,c:ba,ja:Ha,h:ma,i:xa,r:Sa,O:Fa,v:Ia,F:Ma,L:ka,z:Ua,J:qa,$:Qa,Z:Xa,k:Ca,f:va,e:wa,g:ga,N:za,l:Ta,la:La,o:Aa,B:Pa,u:ja,T:Oa,A:Na,n:_a,G:Ea,y:na},O=await Cr();O.ya;var oa=O.za,mt=f._free=O.Aa,qe=f._malloc=O.Ca,ia=O.Da,m=O.Ea,sa=O.Fa,ca=O.Ga,ua=O.Ha,la=O.Ia,fa=O.Ja,da=O.Ka;f.dynCall_viijii=O.La;var ha=f.dynCall_iiijj=O.Ma;f.dynCall_jiji=O.Na;var pa=f.dynCall_jiiii=O.Oa;f.dynCall_iiiiij=O.Pa,f.dynCall_iiiiijj=O.Qa,f.dynCall_iiiiiijj=O.Ra;function va(e,t){var r=g();try{w(e)(t)}catch(n){if(y(r),n!==n+0)throw n;m(1,0)}}function ma(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(y(a),i!==i+0)throw i;m(1,0)}}function ya(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(c){if(y(i),c!==c+0)throw c;m(1,0)}}function ga(e,t,r,n){var a=g();try{w(e)(t,r,n)}catch(i){if(y(a),i!==i+0)throw i;m(1,0)}}function wa(e,t,r){var n=g();try{w(e)(t,r)}catch(a){if(y(n),a!==a+0)throw a;m(1,0)}}function $a(e,t){var r=g();try{return w(e)(t)}catch(n){if(y(r),n!==n+0)throw n;m(1,0)}}function ba(e,t,r){var n=g();try{return w(e)(t,r)}catch(a){if(y(n),a!==a+0)throw a;m(1,0)}}function Ca(e){var t=g();try{w(e)()}catch(r){if(y(t),r!==r+0)throw r;m(1,0)}}function _a(e,t,r,n,a,i,c,s,u,d,p){var v=g();try{w(e)(t,r,n,a,i,c,s,u,d,p)}catch($){if(y(v),$!==$+0)throw $;m(1,0)}}function Ta(e,t,r,n,a){var i=g();try{w(e)(t,r,n,a)}catch(c){if(y(i),c!==c+0)throw c;m(1,0)}}function xa(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(c){if(y(i),c!==c+0)throw c;m(1,0)}}function Pa(e,t,r,n,a,i,c){var s=g();try{w(e)(t,r,n,a,i,c)}catch(u){if(y(s),u!==u+0)throw u;m(1,0)}}function Ea(e,t,r,n,a,i,c,s,u,d,p,v,$,C,S,k){var M=g();try{w(e)(t,r,n,a,i,c,s,u,d,p,v,$,C,S,k)}catch(F){if(y(M),F!==F+0)throw F;m(1,0)}}function Oa(e,t,r,n,a,i,c,s,u){var d=g();try{w(e)(t,r,n,a,i,c,s,u)}catch(p){if(y(d),p!==p+0)throw p;m(1,0)}}function Sa(e,t,r,n,a,i){var c=g();try{return w(e)(t,r,n,a,i)}catch(s){if(y(c),s!==s+0)throw s;m(1,0)}}function Aa(e,t,r,n,a,i){var c=g();try{w(e)(t,r,n,a,i)}catch(s){if(y(c),s!==s+0)throw s;m(1,0)}}function Ia(e,t,r,n,a,i,c){var s=g();try{return w(e)(t,r,n,a,i,c)}catch(u){if(y(s),u!==u+0)throw u;m(1,0)}}function ja(e,t,r,n,a,i,c,s){var u=g();try{w(e)(t,r,n,a,i,c,s)}catch(d){if(y(u),d!==d+0)throw d;m(1,0)}}function Ma(e,t,r,n,a,i,c,s){var u=g();try{return w(e)(t,r,n,a,i,c,s)}catch(d){if(y(u),d!==d+0)throw d;m(1,0)}}function Da(e){var t=g();try{return w(e)()}catch(r){if(y(t),r!==r+0)throw r;m(1,0)}}function ka(e,t,r,n,a,i,c,s,u){var d=g();try{return w(e)(t,r,n,a,i,c,s,u)}catch(p){if(y(d),p!==p+0)throw p;m(1,0)}}function Fa(e,t,r,n,a,i,c){var s=g();try{return w(e)(t,r,n,a,i,c)}catch(u){if(y(s),u!==u+0)throw u;m(1,0)}}function Ra(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(y(a),i!==i+0)throw i;m(1,0)}}function Ba(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(y(a),i!==i+0)throw i;m(1,0)}}function La(e,t,r,n,a,i,c,s){var u=g();try{w(e)(t,r,n,a,i,c,s)}catch(d){if(y(u),d!==d+0)throw d;m(1,0)}}function Wa(e,t,r,n,a,i){var c=g();try{return w(e)(t,r,n,a,i)}catch(s){if(y(c),s!==s+0)throw s;m(1,0)}}function Ua(e,t,r,n,a,i,c,s,u,d){var p=g();try{return w(e)(t,r,n,a,i,c,s,u,d)}catch(v){if(y(p),v!==v+0)throw v;m(1,0)}}function Va(e,t,r){var n=g();try{return w(e)(t,r)}catch(a){if(y(n),a!==a+0)throw a;m(1,0)}}function Ha(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(c){if(y(i),c!==c+0)throw c;m(1,0)}}function Na(e,t,r,n,a,i,c,s,u,d){var p=g();try{w(e)(t,r,n,a,i,c,s,u,d)}catch(v){if(y(p),v!==v+0)throw v;m(1,0)}}function za(e,t,r,n,a,i,c){var s=g();try{w(e)(t,r,n,a,i,c)}catch(u){if(y(s),u!==u+0)throw u;m(1,0)}}function Ga(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(y(a),i!==i+0)throw i;m(1,0)}}function qa(e,t,r,n,a,i,c,s,u,d,p,v){var $=g();try{return w(e)(t,r,n,a,i,c,s,u,d,p,v)}catch(C){if(y($),C!==C+0)throw C;m(1,0)}}function Qa(e,t,r,n,a,i,c){var s=g();try{return ha(e,t,r,n,a,i,c)}catch(u){if(y(s),u!==u+0)throw u;m(1,0)}}function Xa(e,t,r,n,a){var i=g();try{return pa(e,t,r,n,a)}catch(c){if(y(i),c!==c+0)throw c;m(1,0)}}function me(){if(Y>0){U=me;return}if(jt(),Y>0){U=me;return}function e(){var t;f.calledRun=!0,!R&&(te(),P(f),(t=f.onRuntimeInitialized)===null||t===void 0||t.call(f),ee())}f.setStatus?(f.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>f.setStatus(""),1),e()},1)):e()}function Ya(){if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.shift()()}return Ya(),me(),l=I,l};function Oo(o){return sr(cr,o)}async function So(o,l){return Eo(cr,o,l)}const ur=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],Ao=[...ur,["unknown"]].map(o=>o[0]),_e=new Map(ur);function Io(o){for(const[l,h]of _e)if(o===h)return l;return"unknown"}function jo(o){if(lr(o))return{width:o.naturalWidth,height:o.naturalHeight};if(fr(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(dr(o))return{width:o.videoWidth,height:o.videoHeight};if(pr(o))return{width:o.width,height:o.height};if(mr(o))return{width:o.displayWidth,height:o.displayHeight};if(hr(o))return{width:o.width,height:o.height};if(vr(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function lr(o){var l,h;try{return o instanceof((h=(l=o?.ownerDocument)==null?void 0:l.defaultView)==null?void 0:h.HTMLImageElement)}catch{return!1}}function fr(o){var l,h;try{return o instanceof((h=(l=o?.ownerDocument)==null?void 0:l.defaultView)==null?void 0:h.SVGImageElement)}catch{return!1}}function dr(o){var l,h;try{return o instanceof((h=(l=o?.ownerDocument)==null?void 0:l.defaultView)==null?void 0:h.HTMLVideoElement)}catch{return!1}}function hr(o){var l,h;try{return o instanceof((h=(l=o?.ownerDocument)==null?void 0:l.defaultView)==null?void 0:h.HTMLCanvasElement)}catch{return!1}}function pr(o){try{return o instanceof ImageBitmap||Object.prototype.toString.call(o)==="[object ImageBitmap]"}catch{return!1}}function vr(o){try{return o instanceof OffscreenCanvas||Object.prototype.toString.call(o)==="[object OffscreenCanvas]"}catch{return!1}}function mr(o){try{return o instanceof VideoFrame||Object.prototype.toString.call(o)==="[object VideoFrame]"}catch{return!1}}function Mo(o){try{return o instanceof Blob||Object.prototype.toString.call(o)==="[object Blob]"}catch{return!1}}function Do(o){try{return o instanceof ImageData||Object.prototype.toString.call(o)==="[object ImageData]"}catch{return!1}}function ko(o,l){try{const h=new OffscreenCanvas(o,l);if(h.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return h;throw void 0}catch{const h=document.createElement("canvas");return h.width=o,h.height=l,h}}async function yr(o){if(lr(o)&&!await Lo(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(fr(o)&&!await Wo(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(mr(o)&&Uo(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(dr(o)&&(o.readyState===0||o.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(pr(o)&&Ho(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:l,height:h}=jo(o);if(l===0||h===0)return null;const f=ko(l,h).getContext("2d");f.drawImage(o,0,0);try{return f.getImageData(0,0,l,h)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Fo(o){let l;try{l=await createImageBitmap(o)}catch{try{if(globalThis.Image){l=new Image;let h="";try{h=URL.createObjectURL(o),l.src=h,await l.decode()}finally{URL.revokeObjectURL(h)}}else return o}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await yr(l)}function Ro(o){const{width:l,height:h}=o;if(l===0||h===0)return null;const f=o.getContext("2d");try{return f.getImageData(0,0,l,h)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Bo(o){if(Mo(o))return await Fo(o);if(Do(o)){if(Vo(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return hr(o)||vr(o)?Ro(o):await yr(o)}async function Lo(o){try{return await o.decode(),!0}catch{return!1}}async function Wo(o){var l;try{return await((l=o.decode)==null?void 0:l.call(o)),!0}catch{return!1}}function Uo(o){return o.format===null}function Vo(o){return o.data.buffer.byteLength===0}function Ho(o){return o.width===0&&o.height===0}function ar(o,l){return No(o)?new DOMException(`${l}: ${o.message}`,o.name):zo(o)?new o.constructor(`${l}: ${o.message}`):new Error(`${l}: ${o}`)}function No(o){return o instanceof DOMException||Object.prototype.toString.call(o)==="[object DOMException]"}function zo(o){return o instanceof Error||Object.prototype.toString.call(o)==="[object Error]"}var Yt;class Go{constructor(l={}){co(this,Yt);var h;try{const f=(h=l?.formats)==null?void 0:h.filter(P=>P!=="unknown");if(f?.length===0)throw new TypeError("Hint option provided, but is empty.");for(const P of f??[])if(!_e.has(P))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${P}' is not a valid enum value of type BarcodeFormat.`);uo(this,Yt,f??[]),Oo({fireImmediately:!0}).catch(()=>{})}catch(f){throw ar(f,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Ao.filter(l=>l!=="unknown")}async detect(l){try{const h=await Bo(l);if(h===null)return[];let f;const P={tryCode39ExtendedMode:!1,textMode:"Plain",formats:so(this,Yt).map(E=>_e.get(E))};try{f=await So(h,P)}catch{throw new DOMException("Barcode detection service unavailable.","NotSupportedError")}return f.map(E=>{const{topLeft:{x:I,y:D},topRight:{x,y:j},bottomLeft:{x:W,y:N},bottomRight:{x:X,y:ot}}=E.position,ut=Math.min(I,x,W,X),it=Math.min(D,j,N,ot),$t=Math.max(I,x,W,X),G=Math.max(D,j,N,ot);return{boundingBox:new DOMRectReadOnly(ut,it,$t-ut,G-it),rawValue:E.text,format:Io(E.format),cornerPoints:[{x:I,y:D},{x,y:j},{x:X,y:ot},{x:W,y:N}]}})}catch(h){throw ar(h,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Yt=new WeakMap;async function qo(o,l,h){const f=o.target;if(f.files&&f.files[0]){const P=f.files[0],E=await createImageBitmap(P),I=await l.detect(E);I.length>0&&h(I)}}var Qo=(o,l)=>{l().showModal()},Xo=Et("<span>Skannaa</span>"),Yo=Et("<button><!> <!></button>"),Jo=Et(`<div class="flex flex-col items-center text-center p-4"><p class="mb-2 text-red-600 text-balance">Kameran käyttö epäonnistui. Varmista, että laitteessasi on kamera ja selaimellasi on
						lupa käyttää sitä.</p> <button>Yritä uudelleen</button></div>`),Ko=Et('<div class="absolute inset-0 grid place-content-center"><span class="block h-12 w-12 animate-spin rounded-full border-3 border-brand-3 border-b-transparent"></span></div>'),Zo=Et('<div class="relative flex flex-col"><video autoplay playsinline=""></video> <!></div>',2),ti=(o,l)=>{l().close()},ei=Et('<div class="flex flex-col gap-4 p-4"><h2 class="text-center text-xl font-bold">Skannaa viivakoodi</h2> <p class="text-center">Skannaa tuotteen viivakoodi kameralla tai lataa kuva viivakoodista.</p> <div class="border-2 border-dashed border-gray-400 p-4 text-center"><label class="cursor-pointer"><input type="file" accept="image/*" class="hidden"/> <div class="flex flex-col items-center justify-center"><!> <span class="text-blue-500 underline">Valitse kuvatiedosto</span></div></label></div> <!> <button>Sulje</button></div>');function ci(o,l){eo(l,!0);const h=()=>Za(oo,"$isMobile",f),[f,P]=Ka(),E=new Go({formats:["ean_13","qr_code"]});function I(){return navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",height:1080,width:1920,autoGainControl:!0},audio:!1})}let D,x,j=!1,W=ge(null),N=ge(void 0),X=ge(!1);async function ot(){try{ye(W,await I(),!0),D.srcObject=ct(W),it()}catch{ye(X,!0)}}function ut(){ct(W)&&ct(W).getTracks().forEach(R=>R.stop()),j=!1,clearInterval(x)}function it(){clearInterval(x),x=setInterval($t,100)}async function $t(){if(j===!0)return;j=!0;let R=await E.detect(D);R.length>0&&G(R),j=!1}function G(R){let A=R[0];for(const T of R)T.boundingBox.width*T.boundingBox.height>A.boundingBox.width*A.boundingBox.height&&(A=T);try{A.format==="ean_13"&&lt(A),A.format==="qr_code"&&bt(A),ct(N)&&ct(N).close()}catch(T){alert(T)}}function lt({rawValue:R}){const A=R,T=l.kaljakori.findByColumn(Ze.EAN,A);if(T.length!==1)throw"Tuotetta ei löytynyt";er(`/tuotteet/${T[0][Ze.Number]}`,{replaceState:!0})}function bt({rawValue:R}){try{const A=new URL(R);if(A.host!==window.location.host)return;er(A.pathname+A.search)}catch{throw"Virheellinen QR-koodi!"}}io(o,{onOpen:async()=>{await ot()},onClose:()=>{ut()},get dialogElement(){return ct(N)},set dialogElement(T){ye(N,T,!0)},renderButton:(T,st=Ke)=>{var B=Yo();B.__click=[Qo,st];var H=yt(B);tr(H,{name:"scan"});var b=gt(H,2);{var ft=q=>{var Ct=Xo();Pt(q,Ct)};we(b,q=>{h()||q(ft)})}wt(B),Gt(q=>Xt(B,1,q),[()=>qt(Qt($e.button(),"self-end p-2  text-xl"))]),Pt(T,B)},renderContent:(T,st=Ke)=>{var B=ei(),H=gt(yt(B),4),b=yt(H),ft=yt(b);ft.__change=[qo,E,G];var q=gt(ft,2),Ct=yt(q);tr(Ct,{name:"file",class:"mb-2 text-4xl"}),no(2),wt(q),wt(b),wt(H);var jt=gt(H,2);{var te=U=>{var K=Jo(),Z=gt(yt(K),2);Z.__click=ot,wt(K),Gt(dt=>Xt(Z,1,dt),[()=>qt(Qt($e.button(),""))]),Pt(U,K)},ee=U=>{var K=Zo(),Z=yt(K);Z.muted=!0,ao(Z,tt=>D=tt,()=>D);var dt=gt(Z,2);{var _t=tt=>{var re=Ko();Pt(tt,re)};we(dt,tt=>{ct(W)||tt(_t)})}wt(K),Gt(tt=>Xt(Z,1,tt),[()=>qt(Qt("aspect-square w-full rounded border object-cover object-center"))]),Pt(U,K)};we(jt,U=>{ct(X)?U(te):U(ee,!1)})}var Y=gt(jt,2);Y.__click=[ti,st],wt(B),Gt(U=>Xt(Y,1,U),[()=>qt(Qt($e.button(),"mt-4 w-full"))]),Pt(T,B)},$$slots:{renderButton:!0,renderContent:!0}}),ro(),P()}to(["click","change"]);export{ci as B};
